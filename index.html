
<!doctype html>
<html>
  <head>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Accellion API Guide</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-216830-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-216830-1');
    </script>
  </head>

  <body class="index" data-languages="[&quot;php&quot;,&quot;python&quot;,&quot;shell&quot;,&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#prerequisites" class="toc-h1 toc-link" data-title="Prerequisites">Prerequisites</a>
          </li>
          <li>
            <a href="#licensing" class="toc-h1 toc-link" data-title="Licensing">Licensing</a>
          </li>
          <li>
            <a href="#enabling-the-accellion-api-playground" class="toc-h1 toc-link" data-title="Enabling the Accellion API Playground">Enabling the Accellion API Playground</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
          </li>
          <li>
            <a href="#custom-applications" class="toc-h1 toc-link" data-title="Custom Applications">Custom Applications</a>
          </li>
          <li>
            <a href="#sign-up-for-the-free-enterprise-trial-of-kiteworks" class="toc-h1 toc-link" data-title="Sign Up for the Free Enterprise Trial of kiteworks">Sign Up for the Free Enterprise Trial of kiteworks</a>
          </li>
          <li>
            <a href="#accellion-api-playground-documentation-swagger-interface" class="toc-h1 toc-link" data-title="Accellion API Playground Documentation (Swagger Interface)">Accellion API Playground Documentation (Swagger Interface)</a>
          </li>
          <li>
            <a href="#obtaining-a-token" class="toc-h1 toc-link" data-title="Obtaining a Token">Obtaining a Token</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#signature-authorization-flow" class="toc-h2 toc-link" data-title="Signature Authorization flow">Signature Authorization flow</a>
                  </li>
                  <li>
                    <a href="#kiteworks-authorization-code-oauth-2-0-flow" class="toc-h2 toc-link" data-title="kiteworks Authorization Code (OAuth 2.0 Flow)">kiteworks Authorization Code (OAuth 2.0 Flow)</a>
                  </li>
                  <li>
                    <a href="#obtaining-access-token-requirements" class="toc-h2 toc-link" data-title="Obtaining Access Token Requirements">Obtaining Access Token Requirements</a>
                  </li>
                  <li>
                    <a href="#sequence-overview" class="toc-h2 toc-link" data-title="Sequence Overview">Sequence Overview</a>
                  </li>
                  <li>
                    <a href="#step-by-step-usage" class="toc-h2 toc-link" data-title="Step-by-step Usage">Step-by-step Usage</a>
                  </li>
                  <li>
                    <a href="#step-1-authorization-request" class="toc-h2 toc-link" data-title="Step 1 Authorization Request">Step 1 Authorization Request</a>
                  </li>
                  <li>
                    <a href="#step-2-access-token-request" class="toc-h2 toc-link" data-title="Step 2 - Access Token Request">Step 2 - Access Token Request</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#execute-api-calls" class="toc-h1 toc-link" data-title="Execute API Calls">Execute API Calls</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#performing-a-basic-api-call" class="toc-h2 toc-link" data-title="Performing a Basic API Call">Performing a Basic API Call</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#creating-api-requests" class="toc-h1 toc-link" data-title="Creating API Requests">Creating API Requests</a>
          </li>
          <li>
            <a href="#using-api-requests" class="toc-h1 toc-link" data-title="Using API Requests">Using API Requests</a>
          </li>
          <li>
            <a href="#using-id" class="toc-h1 toc-link" data-title="Using id">Using id</a>
          </li>
          <li>
            <a href="#creating-objects" class="toc-h1 toc-link" data-title="Creating Objects">Creating Objects</a>
          </li>
          <li>
            <a href="#adding-files" class="toc-h1 toc-link" data-title="Adding Files">Adding Files</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#adding-large-files" class="toc-h2 toc-link" data-title="Adding Large Files">Adding Large Files</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#downloading-files" class="toc-h1 toc-link" data-title="Downloading Files">Downloading Files</a>
          </li>
          <li>
            <a href="#apis-overview" class="toc-h1 toc-link" data-title="APIs Overview">APIs Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#content-apis" class="toc-h2 toc-link" data-title="Content APIs">Content APIs</a>
                  </li>
                  <li>
                    <a href="#collaboration-apis" class="toc-h2 toc-link" data-title="Collaboration APIs">Collaboration APIs</a>
                  </li>
                  <li>
                    <a href="#preferences-apis" class="toc-h2 toc-link" data-title="Preferences APIs">Preferences APIs</a>
                  </li>
                  <li>
                    <a href="#contacts-apis" class="toc-h2 toc-link" data-title="Contacts APIs">Contacts APIs</a>
                  </li>
                  <li>
                    <a href="#security-apis" class="toc-h2 toc-link" data-title="Security APIs">Security APIs</a>
                  </li>
                  <li>
                    <a href="#client-management-apis" class="toc-h2 toc-link" data-title="Client Management APIs">Client Management APIs</a>
                  </li>
                  <li>
                    <a href="#kiteworks-maintenance-apis" class="toc-h2 toc-link" data-title="kiteworks Maintenance APIs">kiteworks Maintenance APIs</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#common-use-cases" class="toc-h1 toc-link" data-title="Common Use Cases">Common Use Cases</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-folder-contents" class="toc-h2 toc-link" data-title="List folder contents">List folder contents</a>
                  </li>
                  <li>
                    <a href="#download-file" class="toc-h2 toc-link" data-title="Download file">Download file</a>
                  </li>
                  <li>
                    <a href="#get-current-user-info" class="toc-h2 toc-link" data-title="Get current user Info">Get current user Info</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#manage-folders" class="toc-h1 toc-link" data-title="Manage Folders">Manage Folders</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-top-level-folders" class="toc-h2 toc-link" data-title="Get top level folders">Get top level folders</a>
                  </li>
                  <li>
                    <a href="#create-a-folder" class="toc-h2 toc-link" data-title="Create a Folder">Create a Folder</a>
                  </li>
                  <li>
                    <a href="#get-a-particular-folder" class="toc-h2 toc-link" data-title="Get a particular folder">Get a particular folder</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#manage-files" class="toc-h1 toc-link" data-title="Manage Files">Manage Files</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#upload-a-file" class="toc-h2 toc-link" data-title="Upload a file">Upload a file</a>
                  </li>
                  <li>
                    <a href="#initiate-multi-chunks-upload" class="toc-h2 toc-link" data-title="Initiate multi-chunks upload">Initiate multi-chunks upload</a>
                  </li>
                  <li>
                    <a href="#chunk-upload" class="toc-h2 toc-link" data-title="Chunk upload">Chunk upload</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#manage-mail" class="toc-h1 toc-link" data-title="Manage Mail">Manage Mail</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#send-a-mail-with-files" class="toc-h2 toc-link" data-title="Send a Mail with Files">Send a Mail with Files</a>
                  </li>
                  <li>
                    <a href="#send-mail" class="toc-h2 toc-link" data-title="Send mail">Send mail</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#terminology" class="toc-h1 toc-link" data-title="Terminology">Terminology</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#common-issues" class="toc-h2 toc-link" data-title="Common Issues">Common Issues</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#help" class="toc-h1 toc-link" data-title="Help">Help</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://info.accellion.com/demo-request?ref=api-guide-nav'>GET A DEMO</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to Accellion&#39;s API Guide.</p>

<p>Accellion’s RESTful Enterprise API is programming language agnostic and enables you to quickly develop apps that leverage the power of the Accellion Platform. Developers can build custom apps tailored to specific industries, business use cases, and integrate them within an existing IT infrastructure. The APIs allow you to do an HTTPS GET, POST, DELETE or UPDATE.</p>
<h1 id='prerequisites'>Prerequisites</h1>
<p>It is assumed that the reader is familiar with the following concepts and technologies used within the Accellion API framework:
*   Representational State Transfer (REST) architectural styles<br>
*   RESTful style constraints and implementation
*   OAuth 2.0 Protocol
*   JavaScript Object Notation (JSON) format and structure
*   Hypertext Transfer Protocol (HTTP) terminology, methods, and status codes
*   Multipart MIME (Multipurpose Internet Mail Extensions) requests </p>
<h1 id='licensing'>Licensing</h1>
<p>The RESTAPI is available on every Accellion Enterprise package that has the Automation Suite enabled.</p>

<p>Perform the following two steps to see if you have a license for the Accellion APIs:
1.  Log into an Accellion system and click on the Application icon as shown below. 
2.  Click on Licensing on the left panel.
The API is listed in the Features section and it will be enabled if you have an Accellion Enterprise package.   </p>

<p><img src="images/licensing.png" alt="Licensing" /></p>
<h1 id='enabling-the-accellion-api-playground'>Enabling the Accellion API Playground</h1>
<p>Perform the following steps to enable the Accellion API Playground:
1.  Click on the Application &gt; Client Management &gt; Custom Applications as shown below. 
2.  Click on Enable kiteworks API Playground UI  ON/OFF switch to enable it if it not enabled.
A confirmation window displays, click OK to enable the playground.  </p>

<p><img src="images/developerdoc1.jpg" alt="Developerdoc1" /></p>
<h1 id='getting-started'>Getting Started</h1>
<p>To start your custom application development, perform the steps below. 
1.  Sign in to kiteworks. 
Once you have your instance up and running, sign in to the Accellion admin interface with your user credentials. The admin interface can be accessed from the hostname of your Accellion server /admin.
2.  Create your custom application to obtain the identifying information: the Client ID and Secret Key.</p>
<h1 id='custom-applications'>Custom Applications</h1>
<p>Custom applications can be used to automate business workflows, for example, on-boarding new Accellion users to access relevant folders automatically. Accellion APIs are used to develop custom applications. On the <strong>Custom Application</strong> page a list with all the custom applications that already exist on the system is displayed.</p>

<p>Perform the following steps to create a Custom Application:<br>
1. Go to <strong>Applications</strong> &gt; <strong>Client Management</strong> &gt; <strong>Custom Applications</strong> and click the <strong>+</strong> icon to create a new custom application.<br>
2. Enter the following information:<br>
  <strong>Name</strong>: Enter a name for your custom application.<br>
  <strong>Description</strong>: Enter a description for your application.<br>
  <strong>Flows</strong>: Select the authorization flow that your application will use to obtain an access token.<br>
         -<strong>Authorization Code</strong>: standard OAuth 2.0 authorization-code grant type consists of authorization, consent, and code redemption process.<br>
        -<strong>Signature Authorization</strong>: use this flow when the registered client can verify the identity of the user. This flow should only be used for trusted applications. You can choose to either generate a random signature key or manually enter the key.<br>
        -<strong>User Credentials</strong>: use this flow to allow the registered client to obtain the access token by providing the user&#39;s username and password. This flow should only be used for trusted applications that cannot use a Web Form based login, but need the user to authenticate with their username/password, e.g., any command line based utilities. This flow follows the Resource Owner Password Credentials Grant specified in RFC 6749.<br>
  <strong>Enable Refresh Token</strong>: If enabled, when an access token expires, a new access token can be obtained using a refresh token without re-initiating the authorization process.<br>
  <strong>Redirect URI</strong>: Specify the Redirect URI using this format <a href="https://%%HOST%%/rest/callback.html">https://%%HOST%%/rest/callback.html</a><br>
  <strong>Access Token Lifetime</strong>: Set the duration of a token lifetime.<br>
  <strong>Refresh Token Lifetime</strong>: Set the duration that an access token can be refreshed.  </p>

<p>Click <strong>Add Application</strong>.<br>
<img src="images/navigation-custom-apps.png" alt="Navigation custom apps" />  </p>

<p>The Add Client Application dialog box will show the <strong>Client Application ID</strong>, <strong>Client Secret Key</strong> and the <strong>Signature Secret</strong>. Record the information in a secure location.   </p>

<aside class="warning">

   CAUTION The Client Application ID and Client Secret Key cannot be changed and should be protected, since these credentials could be used to access Accellion systems, potentially exposing these systems to loss or theft of critical information. The Administrator is responsible for keeping these credentials safe and should only share them with trusted individuals. </aside>
   

<aside class="important">   

   IMPORTANT: You must copy this information and keep it in a secure location. The Client Secret Key is required for authenticating your app. If you lose this information, you will have to start over and re-register your app. </aside>   

<p><img src="images/add-client-app.png" alt="Add client app" />    </p>

<p>Click <strong>OK</strong>. The application you just created will display on the Custom Applications page.  </p>

<p><img src="images/my-app.png" alt="My app" />  </p>

<p>Select the Application Name you just created, and customize the <strong>Settings</strong>, <strong>Scopes</strong>, <strong>Security</strong> and <strong>Distribution</strong> tabs.  </p>

<aside class="notice">

For more information, go to the Developer Portal at <https://developer.kiteworks.com> to download a demo and view the Developer Guide.  </aside>

<p><strong>Settings</strong> tab: You can make changes to the settings, if desired.</p>

<p><img src="images/settings1.png" alt="Settings1" />   </p>

<p><strong>Scopes</strong>: Scopes are defined limits to client applications for accessing data. By selecting the appropriate scopes for the application, clients can enable or restrict certain tasks to be performed by a user or on behalf of an Accellion user.  </p>

<p>Every custom application that is created can have server-side authorization scopes. You can define on the server what endpoints the custom application is allowed to use and how it can use those endpoints. Select the APIs you plan to use for your custom application. By default, all APIs are selected when you first create the application.   </p>

<p><img src="images/scopes.png" alt="Scopes" />   </p>

<p><strong>Security</strong> tab: 
<strong>Remote Wipe Enabled</strong>:<br>
Enable Remote Wipe for this application.<br>
<strong>Pin Enabled</strong>:<br>
Specify whether a PIN should be enabled for this application. Recommended for mobile apps.<br>
<strong>White Listed Apps</strong>:
List third-party mobile apps that can be used to open files via the Open-In menu.  </p>

<p><img src="images/security1.png" alt="Security1" />   </p>

<p>Select <strong>Save Changes</strong>.<br>
You are now ready to test your application. Go to 
<https://< your kiteworks hostname > /rest/index.html&gt; to test your app using the app credentials. 
Note “your kiteworks hostname” is the name of your Accellion deployment.  </p>

<p><strong>Distribution</strong>:<br>
You can distribute your application and export the application package by clicking <strong>Export App</strong>.  </p>

<p><img src="images/distribution.png" alt="Distribution" /> </p>
<h1 id='sign-up-for-the-free-enterprise-trial-of-kiteworks'>Sign Up for the Free Enterprise Trial of kiteworks</h1>
<p>Go to the following site to sign up:
<a href="https://info.accellion.com/mlp-trl-Enterprise-Trial.html">https://info.accellion.com/mlp-trl-Enterprise-Trial.html</a>  </p>

<p>Within a few minutes after signing up, your trial Accellion system in the cloud will be ready for use. You will receive an email from provisioning@accellion.com with instructions on how to access it.  </p>

<aside class="notice">
  
This trial is not intended for commercial use in a production environment, its sole purpose is for non-production development and testing. </aside> 
<h1 id='accellion-api-playground-documentation-swagger-interface'>Accellion API Playground Documentation (Swagger Interface)</h1>
<p>The Accellion APIs are used by the custom applications to access user resources on a Accellion server.  </p>

<p><strong>API Usage</strong> – The APIs follow the REST architectural style and use the scheme of addressing a resource and invoking a method on that resource.<br>
<strong>The API URI</strong> – All APIs can be called using the following URI scheme: <a href="https://%3Chostname">https://&lt;hostname</a>/rest/<resources><br>
**API Output 88 – The API result is returned in JSON format.  </p>

<p>To access the Accellion the API Playground, click on the <strong>? (Help)</strong> icon and select <strong>Developer Documentation</strong> as shown below or type in the URL of the kiteworks instance/rest/index.html.  </p>

<p><img src="images/developerdoc1.jpg" alt="Developerdoc1" />  </p>

<p>The <strong>Developer Documentation</strong> Swagger Interface displays. </p>

<p>There are several API versions, all of which are supported. To maintain and enhance security and performance, Accellion rolls out API versions periodically. It is recommended to configure the application to run the latest API version which ensures the benefit of using the latest features.</p>

<p>Click on <strong>API version</strong> and select the latest API version before you start using the APIs.</p>

<p><img src="images/apiversion.png" alt="Apiversion" />  </p>
<h1 id='obtaining-a-token'>Obtaining a Token</h1>
<p>Select the <strong>Get a Token</strong> button in the upper right corner of Developer Documentation page. This token is used for all requests sent out from this documentation page.  </p>

<aside class="notice">
Several of the “grant types” are only usable in the API playground and will not display. Only Authorization Code, Signature-Based Authorization Code, and SAML 2.0 Assertion will display.
</aside>  

<p><img src="images/getatoken.png" alt="Getatoken" />  </p>

<p>You can request a token from the following grant types based on how your system is configured:<br>
*   Authorization Code
*   Signature-based Authorization Code
*   Signature-based Access
*   User Credential 
*   User Credential (using HTTP Basic Authorization)
*   SAML 2.0 Assertion
*   JWT Assertion</p>
<h1 id='authentication'>Authentication</h1><h2 id='signature-authorization-flow'>Signature Authorization flow</h2>
<p>Accellion offers Signature Authorization flow for <strong>trusted</strong> apps where user interaction is impossible or undesirable. This is mostly applicable when some backend servers in your corporate network need to communicate with Accellion or when your app handles user authentication on its own.</p>

<aside class="warning">
Apps using Signature Authorization flow can access any user's content, simply by specifying their email address. As such, these apps should only be accessible by trusted employees with high security clearance.
</aside>  

<p>To view the sample code, click on the <strong>php</strong> tab on the right panel.</p>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="c1">// --- Configuration Section ---
</span><span class="nv">$kiteworks_hostname</span>     <span class="o">=</span> <span class="s1">'YOUR-SERVER.DOMAIN.ORG'</span><span class="p">;</span>
<span class="nv">$client_app_id</span>          <span class="o">=</span> <span class="s1">'YOUR-CLIENT-APP-ID'</span><span class="p">;</span>
<span class="nv">$client_app_secret_key</span>  <span class="o">=</span> <span class="s1">'YOUR-CLIENT-APP-SECRET-KEY'</span><span class="p">;</span>
<span class="nv">$signature_key</span>          <span class="o">=</span> <span class="s1">'YOUR-SIGNATURE-KEY'</span><span class="p">;</span>
<span class="nv">$user_id</span>                <span class="o">=</span> <span class="s1">'YOUR-USER-EMAIL-TO-BE-USED-FOR-API-INTEGRATION'</span><span class="p">;</span>
<span class="nv">$api_scope</span>              <span class="o">=</span> <span class="s1">'YOUR-CLIENT-APP-SCOPES'</span><span class="p">;</span> <span class="c1">// e.g. 'folders/* files/* mail/*'
</span><span class="nv">$redirect_uri</span>           <span class="o">=</span> <span class="s1">'YOUR-REDIRECT-URI'</span><span class="p">;</span>

<span class="c1">// --- Generate Signature Based Auth Code ---
</span><span class="nv">$timestamp</span>              <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
<span class="nv">$nonce</span>                  <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">999999</span><span class="p">);</span>

<span class="nv">$base_string</span> <span class="o">=</span> <span class="s2">"</span><span class="nv">$client_app_id</span><span class="s2">|@@|</span><span class="nv">$user_id</span><span class="s2">|@@|</span><span class="nv">$timestamp</span><span class="s2">|@@|</span><span class="nv">$nonce</span><span class="s2">"</span><span class="p">;</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">"sha1"</span><span class="p">,</span><span class="nv">$base_string</span><span class="p">,</span> <span class="nv">$signature_key</span><span class="p">);</span>
<span class="nv">$auth_code</span> <span class="o">=</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$client_app_id</span><span class="p">)</span><span class="o">.</span><span class="s2">"|@@|"</span><span class="o">.</span><span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$user_id</span><span class="p">)</span><span class="o">.</span><span class="s2">"|@@|</span><span class="nv">$timestamp</span><span class="s2">|@@|</span><span class="nv">$nonce</span><span class="s2">|@@|</span><span class="nv">$signature</span><span class="s2">"</span><span class="p">;</span>


<span class="c1">// --- Initialize CURL Parameters Section ---
</span><span class="nv">$access_token_endpoint</span> <span class="o">=</span> <span class="s2">"https://</span><span class="nv">$kiteworks_hostname</span><span class="s2">/oauth/token"</span><span class="p">;</span>

<span class="nv">$postData</span>  <span class="o">=</span> <span class="s2">"client_id="</span> <span class="o">.</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$client_app_id</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"&amp;"</span><span class="p">;</span> 
<span class="nv">$postData</span> <span class="o">.=</span> <span class="s2">"client_secret="</span><span class="o">.</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$client_app_secret_key</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"&amp;"</span><span class="p">;</span> 
<span class="nv">$postData</span> <span class="o">.=</span> <span class="s2">"grant_type=authorization_code&amp;"</span><span class="p">;</span> 
<span class="nv">$postData</span> <span class="o">.=</span> <span class="s2">"code="</span><span class="o">.</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$auth_code</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"&amp;"</span><span class="p">;</span>
<span class="nv">$postData</span> <span class="o">.=</span> <span class="s2">"scope="</span><span class="o">.</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$api_scope</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"&amp;"</span><span class="p">;</span>
<span class="nv">$postData</span> <span class="o">.=</span> <span class="s2">"redirect_uri="</span><span class="o">.</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$redirect_uri</span><span class="p">);</span> 


<span class="c1">// --- Make CURL request ---
</span><span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$access_token_endpoint</span><span class="p">);</span>       
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$postData</span> <span class="p">);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span> <span class="nv">$ch</span> <span class="p">);</span>
<span class="nv">$curl_error</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$error_no</span> <span class="o">=</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="c1">// --- Print Response ---
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$curl_error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">print</span> <span class="s2">"Curl error </span><span class="nv">$error_no</span><span class="s2">: "</span> <span class="o">.</span> <span class="nv">$curl_error</span><span class="o">.</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
  <span class="k">die</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
  <span class="nv">$arr_response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$arr_response</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre><h3 id='steps-in-signature-flow'>Steps in Signature flow</h3>
<ol>
<li>Calculate authorization code using the following parameters:

<ul>
<li>Signature Key and Client ID: These were displayed on the Admin interface when the custom app using Signature flow was created.</li>
<li>Email address of the user for whom the app needs an access token.</li>
<li>Current timestamp: The code will remain valid for an hour after creation.</li>
<li>Nonce: A random integer between 1 and 999999.
Using these parameters, the authorization flow can be calculated. First, a base string should be calculated using the following format:
base_string = client_id|@@|user_id|@@|timestamp|@@|nonce</li>
</ul></li>
</ol>

<p>Here is a sample snippet of Java code to calculate the base string:</p>

<p><code>//Constructs the base string using elements outlined in the documentation
String baseString + clientId + “|@@}” + userId + “|@@|” + Long.toString(timestamp) + “|@@|” + Integer.toString(nonce);</code></p>

<p>From there, the signature of the base string can be calculated, using the HMAC SHA1 method, and using the client application’s signature key as the HMAC’s key:</p>

<p><code>signature = HMAC_SHA1(base_string, client_signature_key)</code><br>
 </p>

<p>Here is a sample method in Java to calculate the signature:</p>

<p><code>//Used by the authentication method. Gets a signature based on a key and a base string 
Private String getSignature(String clientSignatureKey, StringbaseString) throws Exception{
Mac hmacsha1 = Mac.getinstance(“HmacSHA1”);
SecretKeySpec signinKey = new SecretKeySpec(clientSignatureKey.getBytes(), “HmacSHA1”);
Hmacsha1.init(signingKey);
Byte[] rawHmac = hmacsha1.doFinal(baseString.getBytes());
String signature = DatatypeConverter.printHexBinary(rawHmac).toLowercase();
return signature;
]</code>  </p>

<p>Finally, the authorization code can be constructed as follows:<br>
<code>auth_code = base64_encode(client_id)|@@|base64_encode(user_id)|@@|timestamp|@@|nonce|@@|signature</code>  </p>

<p>Here is a sample method in Java for calculating the authorization code:<br>
<code>//Used by the authentication method. Gets an auth code based on parameters.
Private String getAuthCode (String clientId, String userId, String timestamp, String nonce, String signature) throws IOException {</code></p>

<p><code>//Base 64 encoder
BASE64Encoder encoder = new BASE64Encoder();</code></p>

<p><code>//encodes the client id and takes off the last character, as the encoder adds a new line character at the end
String encodedClientId = encoder.encodeBuffer(clientId.getBytes());
encodedClientId = encodedClientId.substring(0, encodedClientId.length() – 1);</code></p>

<p><code>//encodes the user id
String encodeUserId = encoder.encodrBuffer(userId.getBytes());
encodeUserId = encodeUserId.substring (0, encodeUserId.length() – 1;v</code></p>

<p><code>//Construct auth code
String authCode = encodedClientId + “|@@|” + encodedUserId + “|@@|” + timestamp + “|@@|” + nonce + “|@@|” + signature;</code></p>

<p><code>return authcode;
}</code></p>

<ol>
<li>Fetch access token from Accellion&#39;s token URI using the following parameters:<br>

<ul>
<li><strong>Client ID</strong> and <strong>secret</strong>: Displayed on Admin interface when app was created.</li>
<li><strong>Grant Type</strong>: This should be the string “authorization_code” for the token request to work.</li>
<li><strong>Scope</strong>: This is the scope of the API services that the client application wants to access. This should be a space-separated string that consists of the name of the services that the application requires. The requested scope must be a subset of the client application’s registered scope in the server.</li>
<li><strong>Redirect URL</strong>: This is exactly the same redirect URI as registered with the server.</li>
<li><strong>Code</strong>: This is the authorization code calculated in step one.</li>
<li><strong>install_tag_id</strong> (optional parameter): This is a string to uniquely identify the device from which the API call has initiated.</li>
<li><strong>install_name</strong> (optional parameter): This is the friendly name of the device from which the API call has initiated</li>
</ul></li>
</ol>

<aside class="notice">
Note that the step 2 is the same as OAuth 2.0 Authorization Code flow. Step 1 <b>calculates</b> the auth code instead of asking the user and Accellion server for it. This is what gives Signature Flow its power and risks.
</aside>

<p>Here is an example of the POST request:  </p>

<p><code>POST /oauth/token HTTP/1.1
Host: kiteworks_server
Content-type: application/x-www-form-urlencoded
Content-length:  415
Connection: close
Client_id=playground&amp;client_secret=secret&amp;grant_type=authorization_code&amp;scope=*
%2folders%2F*%202F8files%&amp;code=cGxheWdyb3VuZA%3D%7C
%40540%7CdGVzdEBhY2N1bGxpb24uY29t%7C%40%40%7c1407493837%7C%40%40%7C724408%7C
%40%40%7C4efc222192b742bd56516004412cce79267b4c02&amp;redirect_url=https%3A%2F%2Fserver.com%2F</code></p>

<p>Here is a sample method in Java to construct the string of parameters to be sent in the request:</p>

<p><code>//Assembles all of the elements necessary to be passed through the web requested
//to be authenticated successfully
private String getParams(String clientId, String clientSecret, String scope, String redirectUri, StringauthCode) {</code></p>

<p><code>String params = &quot;client_id=&quot; + clientId + &quot;&amp;&quot;;
params = params + &quot;client_secret=&quot; + clientSecret + &quot;&amp;&quot;;
params = params + &quot;grant_type=&quot; + &quot;authorization_code&quot; + &quot;&amp;&quot;;
params = params + &quot;scope=&quot; + scope + &quot;&amp;&quot;;
params = params + &quot;redirect_uri=&quot; + URLEncoder.encode(redirectUri) + &quot;&amp;&quot;;
params = params + &quot;code=&quot; + URLEncoder.encode(authCode);
return params;
}</code> </p>
<h3 id='responses-from-server'>Responses from server</h3>
<p>Once these two steps are complete, if there are no errors for the POST request, the server will return a HTTP response 200 OK. The body for the response will be in JSON format and will include the following:</p>

<ul>
<li>  <strong>access_token:</strong> This is the token that will be used for all requests to the API.</li>
<li>  <strong>expires_in:</strong> This is the number of seconds after which the access token will expire.</li>
<li>  <strong>scope:</strong> This is the scope for which this token is valid.</li>
<li>  <strong>refresh_token:</strong> This is a token that can be used to get a new access token without going through the first step of authorization.</li>
<li>  <strong>token_type:</strong> This will be set to “bearer” because that is the type of token.</li>
</ul>

<p>Here is an example of a successful response:<br>
<code>HTTP/1.1 200 OK Cache-Control: no-store Content-Type: application/json</code></p>

<p><code>{&quot;access_token&quot;:&quot;054915e674bc35fa7fff1f499044e964d3a5d61b&quot;,&quot;expires_in&quot;:3600,&quot;token_type&quot;:&quot;bearer,&quot;scope&quot;:&quot;*\/folders\/* *\/files\/*&quot;, &quot;refresh_token&quot;:&quot;085b8f5e3153c083fdde20d53030b5b623a6ecb3&quot;}</code></p>

<p>If there are problems with the request, the server will return a HTTP 400 bad request. The body of the response will contain error information in JSON format. Here are the possible values for the error code:</p>

<ul>
<li>  <strong>invalid_client:</strong> This indicates that the client application authentication failed. This is likely because either the client ID and/or the secret key provided are incorrect.</li>
<li>  <strong>invalid_grant:</strong> This indicates that the user’s credentials are not valid.</li>
<li>  <strong>invalid_scope:</strong> This indicates that the requested scope in invalid or exceeds the previously granted scope.</li>
<li>  <strong>invalid_request:</strong> This indicates that the request is malformed, which usually means that there is a missing parameter that is required.</li>
<li>  <strong>unauthorized_client:</strong> This indicates that the client application is not authorized to use this flow.</li>
</ul>
<h2 id='kiteworks-authorization-code-oauth-2-0-flow'>kiteworks Authorization Code (OAuth 2.0 Flow)</h2>
<p>The kiteworks APIs allows any new client application (client for short) to be developed for the kiteworks solution. The APIs can be used by the client to gain access to resources belonging to a user on the kiteworks server. The APIs can only be used by a client that is registered on the kiteworks server.</p>

<p>A client must provide an access token to access resources belonging to a user on the kiteworks server. The kiteworks server provides access token provisioning flows based on the OAuth 2.0 (https://tools.ietf.org/html/rfc6749). The majority of clients will consume the so-called Authorization Code Flow to obtain an access token. This flow is developed based on the authorization code grant type of the OAuth 2.0 specification.</p>

<p>This section provides a step-by-step guide for application developers to build a client for consuming the Authorization Code Flow to obtain an access token and use the access token to access users’ resources on a kiteworks server. </p>
<h2 id='obtaining-access-token-requirements'>Obtaining Access Token Requirements</h2>
<p>For obtaining an access token using the kiteworks Authorization Code Flow, you need the client registration information recorded in the previous steps:</p>

<ul>
<li>  <strong>client_id</strong> – This is a unique system generated id of your client.</li>
<li>  <strong>client_secret</strong> – This secret serves as a password for your client to authenticate itself to the kiteworks server.</li>
<li>  <strong>redirect URI</strong> – This is the URI on which your client must listen for the authorization result. For mobile clients or for clients that cannot be redirected to another service, the landing page https://<kiteworks_server>/oauth_callback.php can be used.</li>
<li>  <strong>scope</strong> – This is the set of API services that your client wants to access. Consult with your administrator regarding which scopes are available for your client.</li>
<li>  <strong>grant_type</strong> – REQUIRED.  Value MUST be set to &quot;authorization_code&quot;.<br></li>
</ul>

<aside class="notice">

You might need to specify grant_type when generating the code first. If the grant_type is not specified in the auth code request, you might get an error “grant_type was not specified” when requesting the token with that auth code saying the. One the grant_type is specified in the initial auth code request, the code works for the access token request. </aside>
<h2 id='sequence-overview'>Sequence Overview</h2>
<p>The sequence of the Authorization Code Flow is as follows:
1.  The client initiates the flow by redirecting the user-agent (browser or web view component) to the appropriate authorization page on the server. The client includes its ID and a redirect URI to which the server will send the user back once access is granted or denied.
2.  The server authenticates the user using a login page similar to web client login page and establishes whether the user grants or denies the client&#39;s access request.
3.  If the user grants access, the server redirects the user-agent to the redirection URI provided earlier. The URI also includes an authorization code that can be used to request an access token for that user.
4.  The client requests an access token from the server by authenticating itself (using its ID and secret) and including the authorization code received in the previous step.
5.  The server validates the client credentials and the authorization code and responds with the access token. The client uses the access token to invoke APIs for accessing user’s resources. </p>
<h2 id='step-by-step-usage'>Step-by-step Usage</h2>
<p>The request-response of this flow follows the specification of OAuth 2.0 protocol (http://tools.ietf.org/html/rfc6749#section-4.1). All requests for authorization and for calling service must be done through HTTPS. The URI end-points of this flow are as follows:
*   Authorization end-point: https://<hostname>/oauth/authorize
*   Token end-point: https://<hostname>/oauth/token
All request parameters, unless otherwise specified, must be passed through HTTP POST parameters. The response body will be in JSON format. The following information describes this in more detail.</p>
<h2 id='step-1-authorization-request'>Step 1 Authorization Request</h2>
<p>The first step is to call the Authorization end-point with the request parameters passed via HTTP GET. Depending on the case, the user may be prompted with a dialog to authenticate and then to authorize the request for access permission by the client application. The following parameters must be passed in the request to the Authorize URI (this follows the OAuth 2 specification).</p>

<ul>
<li>  <strong>client_id</strong> – is the identifier of the client-application as registered in the server. For example ‘playground’.</li>
<li>  <strong>redirect_uri</strong> – is the URI to which the result of the authorization will be passed. This redirect URI must start with the URI specified at the time of the creation/registration of the client application. For example, if the client application had registered with the redirect URI of https://mydomain.com/oauth then the client application may provide https://mydomain.com/oauth/callback as redirect_uri parameter in this request. Note, that this parameter must be properly URL-encoded.</li>
<li>  <strong>response_type</strong> – the value of this parameter must be set to “code”.</li>
<li>  <strong>scope</strong> – is the scope of the API services that the client wants to access. This is a space-separated string consisting of the name of the method and API services that the application requires. For example: “GET/users/* <em>/files/</em>”. The requested scope must be a sub-set of the client application&#39;s registered scope in the server. If a blank scope is provided, the registered scope will be assumed.</li>
<li>  <strong>m</strong> (optional parameter) – set to 1 to display mobile friendly authorization page.</li>
<li>  <strong>state</strong> (optional parameter) – is an optional parameter that the client application may pass in order to maintain the state of its process. The server will pass back this parameter as-is in the response. </li>
</ul>

<p>Example: 
(Note that line break is used only for clarity)<br>
<code>GET https://kiteworks_server/oauth/authorize?</code></p>

<p><code>client_id=abc&amp;response_type=code&amp;scope=&amp;redirect_uri= https%3A%2F%2Fkiteworks_server%2Foauth_callback.php HTTP/1.1</code></p>

<p><strong>Successful Response</strong>
After the server finishes the authorization and authentication procedure with the user, the server will redirect the user (via HTTP 302) to the redirect_uri provided in the Authorize call. Two parameters will be passed through this redirection URI: code and state. The code parameter is the authorization code that can be used to obtain the access token in the second step.</p>

<p>Example:<br>
<code>HTTP/1.1 302 Found</code></p>

<p><code>Location: https://kiteworks_server/oauth_callback.php?code=60cc146c8dced75e26e</code></p>

<p><strong>Error Response</strong>
If an error occurs (such as invalid consumer id, or invalid redirect URI), an error message will be displayed immediately within the user’s browser. For other errors (such as invalid scope or denied access by the user) the server will redirect the user (via HTTP302) to the redirect_URI. The parameters are:
*   <strong>error</strong> – is the error code. The following are the possible values of the error code:<br>
    - <strong>access_denied</strong>: The user denied the permission request. 
    - <strong>invalid_scope</strong>: The requested scope is invalid.
    - <strong>invalid_request</strong>: The request is missing a required parameter, includes an unsupported parameter or parameter value, or is otherwise malformed.
    - <strong>unauthorized_client</strong>: The client-application is not authorized to use this flow. 
    - <strong>state</strong> – is set to the exact value received in the request. </p>

<p>Example:<br>
<code>HTTP/1.1 302 Found</code></p>

<p><code>Location: https:// kiteworks_server/oauth_callback.php?error=access_denied</code></p>
<h2 id='step-2-access-token-request'>Step 2 - Access Token Request</h2>
<p>The authorization code obtained in the first step can be exchanged for the final access token by making a request to the access token end-point. The following parameters must be passed to the token end-point as POST parameters:
 *  <strong>client_id</strong> – is the ID of the client as registered in the server. E.g. ‘playground’.
 *  <strong>client_secret</strong> – is the client’s secret phrase as registered in the server.
 *  <strong>grant_type</strong> – its value must be set to authorization_code.
 *  <strong>redirect_uri</strong> – is exactly the same redirect URI as used in the first step.
 *  <strong>code</strong> – is the authorization code obtained in the first step.
 *  <strong>install_tag_id</strong> (optional parameter) – is a string to uniquely identify the device from which the API call has initiated.
 *  <strong>install_name</strong> (optional parameter) – is the friendly name of the device from which the API call has initiated.</p>

<p>Example:<br>
(Note that line breaks on the message content are used only for clarity)<br>
<code>POST /oauth/token HTTP/1.1
Host: kiteworks_server
Content-type: application/x-www-form-urlencoded</code></p>

<p><code>client_id=abc&amp;client_secret=TheSecret&amp;grant_type=authorization_code&amp;code=c88bc36f751549adf60658c2c607a03b52e417bc&amp; redirect_uri= https%3A%2F%2Fkiteworks_server%2Foauth_callback.php &amp;install_tag_id=device_123&amp;install_name=user_ipad</code></p>

<p><strong>Successful Response</strong>
If the credentials of the client and the authorization code are valid and there is no other error, the server will return a HTTP response 200 OK. The body of the response is in JSON format with the following information:</p>

<ul>
<li><strong>access_token</strong> – is the token that can be used to request an API service.</li>
<li><strong>expires_in</strong> – is the number in seconds after which the access token would expire.</li>
<li><strong>token_type</strong> – is set to “bearer”</li>
<li><strong>scope</strong> – is the scope for which this token is valid, normally it will be the same as the requested scope.</li>
<li><strong>refresh_token</strong> – is the refresh token that can be used to get a new access token without going through Step 1 Authorization Request. This refresh token will be provided only if the client is allowed to use refresh tokens as specified during client registration.</li>
</ul>

<p>Example:<br>
<code>HTTP/1.1 200 OK  
Cache-Control: no-store  
Content-Type: application/json</code>  </p>

<p><code>{&quot;access_token&quot;:&quot;d932e1d32d89140163345d47fa97bfa60eeba1a5&quot;,&quot;expires_in&quot;:&quot;360000&quot;,&quot;token_type&quot;:&quot;bearer&quot;, &quot;scope&quot;:&quot;GET\/users\/* *\/files\/*&quot;,&quot;refresh_token&quot;:&quot;d7ce54d721e8das60943f3fc7cb159e4b11d0ee5&quot;}</code></p>

<p>This access token can then be used to access user&#39;s resources through API services. </p>

<p><strong>Error Response</strong> 
If the credentials of the client or the authorization code is invalid or there is some other error, the server will respond with HTTP 400 Bad Request. The body of the response will contain the following error information in JSON format:
 * <strong>serror</strong> – is the error code. The following are the possible values :
    - <strong>invalid_client</strong> – Client authentication failed. The client ID and/or secret key provided is invalid.
    - <strong>invalid_grant</strong> – The authorization code or redirect URI provided is invalid. invalid_scope – The requested scope is invalid or exceeds the previously granted scope.
    - <strong>invalid_request</strong> – The request is missing a required parameter, includes an unsupported parameter or parameter value, or is otherwise malformed.
    - <strong>unauthorized_client</strong> – The client is not authorized to use this flow.</p>
<pre class="highlight python tab-python"><code><span class="n">Example</span> <span class="n">script</span> <span class="k">for</span> <span class="n">getting</span> <span class="n">the</span> <span class="n">OAuth</span> <span class="n">token</span> <span class="p">(</span><span class="n">Python</span> <span class="mf">2.7</span><span class="p">):</span>
<span class="c">#!/usr/bin/python</span>
<span class="s">'''
Script for generating OAuth token using Kiteworks API
'''</span>

<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="k">def</span> <span class="nf">auth_code</span><span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">time_stamp</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span> <span class="n">signature_key</span><span class="p">):</span>
    <span class="s">'''
    Step 1 - Calculate authcode using signature_key.
    '''</span>
    <span class="c"># create a base string using |@@| as delimiter between values</span>
    <span class="n">base_string</span> <span class="o">=</span> <span class="n">client_id</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="n">user_id</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time_stamp</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">nonce</span><span class="p">)</span>
    <span class="c"># create HMAC cryptographic signature</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span> <span class="n">signature_key</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">base_string</span><span class="p">,</span> <span class="n">digestmod</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="c"># generate auth code with base64 encoded client_id, user_id with time_stamp, nonce and the HMAC sig</span>
    <span class="n">auth_code</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">client_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time_stamp</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">nonce</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="n">sig</span>
    <span class="k">return</span> <span class="n">authcode</span>


<span class="k">def</span> <span class="nf">oauth_token</span><span class="p">(</span><span class="n">token_uri</span><span class="p">,</span> <span class="n">header_data</span><span class="p">,</span> <span class="n">access_data</span><span class="p">)</span>
    <span class="s">'''
    Step 2 - Request OAuth token from Kiteworks now that we have all the information that is needed.
    '''</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">token_uri</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header_data</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">access_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">()</span>

    <span class="c"># Setup initial variables required for OAuth, as well as scope for Kiteworks APIs</span>
    <span class="n">client_id</span> <span class="o">=</span> <span class="s">"186f9w3d-4e52-555c-89ff-a8c306422186"</span>
    <span class="n">client_secret</span> <span class="o">=</span> <span class="s">"zjzHsj2g"</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="s">"jeremy.user.1@gmail.com"</span>
    <span class="n">redirect_uri</span> <span class="o">=</span> <span class="s">"https://meowworks.accellion.net/test2"</span>
    <span class="n">token_uri</span> <span class="o">=</span> <span class="s">"https://meowworks.accellion.net/oauth/token"</span>
    <span class="n">time_stamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
    <span class="n">nonce</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span>
    <span class="n">signature_key</span> <span class="o">=</span> <span class="s">"nMQItNF6yc7r57w8BmtdCrzQ0yWb3zvTWNet7sved1Ma"</span>
    <span class="n">grant_type</span> <span class="o">=</span> <span class="s">"authorization_code"</span>
    <span class="n">scope</span> <span class="o">=</span> <span class="s">'*/activities/* */admin/* */profile/* */users/* */files/* */folders/*'</span>

    <span class="c"># Dictionary containing header data for OAuth token POST request</span>
    <span class="n">header_data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Accellion-Version'</span><span class="p">:</span><span class="s">'8'</span><span class="p">}</span>

    <span class="c"># Dictionary containing data for OAuth token POST request</span>
    <span class="n">access_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'client_id'</span><span class="p">:</span> <span class="n">client_id</span><span class="p">,</span>
        <span class="s">'client_secret'</span><span class="p">:</span> <span class="n">client_secret</span><span class="p">,</span>
        <span class="s">'grant_type'</span><span class="p">:</span> <span class="n">grant_type</span><span class="p">,</span>
        <span class="s">'scope'</span><span class="p">:</span> <span class="n">scope</span><span class="p">,</span>
        <span class="s">'code'</span><span class="p">:</span> <span class="n">auth_code</span><span class="p">,</span>
        <span class="s">'redirect_uri'</span><span class="p">:</span> <span class="n">redirect_uri</span>
    <span class="p">}</span>

    <span class="n">authcode</span> <span class="o">=</span> <span class="n">auth_code</span><span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">time_stamp</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span> <span class="n">signature_key</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">oauth_token</span><span class="p">(</span><span class="n">token_uri</span><span class="p">,</span> <span class="n">header_data</span><span class="p">,</span> <span class="n">access_data</span><span class="p">)</span>

    <span class="c"># Print response containing OAuth token in JSON format</span>
    <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="n">main</span><span class="p">()</span><span class="err">`</span>

<span class="n">You</span> <span class="n">will</span> <span class="n">need</span> <span class="n">to</span> <span class="kn">import</span> <span class="nn">some</span> <span class="n">Python</span> <span class="n">libraries</span> <span class="ow">and</span> <span class="n">define</span> <span class="n">some</span> <span class="n">variables</span><span class="o">.</span> <span class="n">The</span> <span class="n">following</span> <span class="n">example</span> <span class="ow">is</span> <span class="n">hard</span><span class="o">-</span><span class="n">coded</span><span class="p">:</span>

<span class="err">`</span><span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="n">client_id</span> <span class="o">=</span> <span class="s">"186f3ead-4e52-555c-89ff-a8c306422186"</span>
<span class="n">client_secret</span> <span class="o">=</span> <span class="s">"zjzHsj2g"</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="s">"jeremy.user.1@gmail.com"</span>
<span class="n">redirect_uri</span> <span class="o">=</span> <span class="s">"https://tsekiteworks.accellion.net/test2"</span>
<span class="n">token_uri</span> <span class="o">=</span> <span class="s">"https://tsekiteworks.accellion.net/oauth/token"</span>
<span class="n">time_stamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<span class="n">nonce</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">999999</span><span class="p">)</span>
<span class="n">signature_key</span> <span class="o">=</span> <span class="s">"nMQItNF6yc7r57w8BmtdCrzQ0yWb3zvTWNet7sved1Ma"</span>
<span class="n">grant_type</span> <span class="o">=</span> <span class="s">"authorization_code"</span>
<span class="n">scope</span> <span class="o">=</span> <span class="s">'*/activities/* */admin/* */profile/* */users/* */files/* */folders/*'</span><span class="err">`</span>

<span class="c"># Calculating Auth code using Signature:</span>

<span class="err">`</span><span class="c"># Step 1 - Calculating Authorization Code using Signature</span>
<span class="c">#</span>
<span class="c"># construct base string using this format: base_string = client_id|@@|user_id|@@|timestamp|@@|nonce</span>
<span class="n">base_string</span> <span class="o">=</span> <span class="n">client_id</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="n">user_id</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time_stamp</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">nonce</span><span class="p">)</span>
<span class="c"># calculate signature of base_string using HMAC SHA1 and signature key as HMAC key</span>
<span class="n">sig</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">signature_key</span><span class="p">,</span>
               <span class="n">msg</span><span class="o">=</span><span class="n">base_string</span><span class="p">,</span>
               <span class="n">digestmod</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="c"># construct authorization code as: auth_code = base64_encode(client_id)|@@|base64_encode(user_id)|@@|timestamp|@@|nonce|@@|signature</span>
<span class="n">auth_code</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">client_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time_stamp</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">nonce</span><span class="p">)</span> <span class="o">+</span> <span class="s">'|@@|'</span> <span class="o">+</span> <span class="n">sig</span><span class="err">`</span>

<span class="c"># Request Access Token</span>

<span class="err">`</span><span class="n">Step</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">OAuth</span> <span class="n">Token</span> <span class="n">Request</span>   

<span class="n">HTML</span> <span class="n">header</span> <span class="n">data</span>
<span class="n">header_data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Accellion-Version'</span><span class="p">:</span><span class="s">'8'</span><span class="p">}</span>
<span class="c"># payload to pass to token endpoint</span>
<span class="n">access_data</span> <span class="o">=</span> <span class="p">{</span> <span class="s">'client_id'</span><span class="p">:</span> <span class="n">client_id</span><span class="p">,</span>
                <span class="s">'client_secret'</span><span class="p">:</span> <span class="n">client_secret</span><span class="p">,</span>
                <span class="s">'grant_type'</span><span class="p">:</span> <span class="n">grant_type</span><span class="p">,</span>
                <span class="s">'scope'</span><span class="p">:</span> <span class="n">scope</span><span class="p">,</span>
                <span class="s">'code'</span><span class="p">:</span> <span class="n">auth_code</span><span class="p">,</span>
                <span class="s">'redirect_uri'</span><span class="p">:</span> <span class="n">redirect_uri</span><span class="p">}</span>
<span class="c"># POST</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">token_uri</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">header_data</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">access_data</span><span class="p">)</span>
<span class="c"># print response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre><h1 id='execute-api-calls'>Execute API Calls</h1>
<p>Once the access token is obtained, you will need to paste it in the <strong>OAuth Token</strong> field as shown below.</p>

<p><img src="images/developer_doc2.png" alt="Developer doc2" /></p>

<p>Now, you can start using the kiteworks API in your application. </p>
<h2 id='performing-a-basic-api-call'>Performing a Basic API Call</h2>
<p>A list of entities, each of which correspond to a different feature of kiteworks is represented with a JSON payload. When an entity name is clicked, the interface expands to show all of the endpoints associated with that entity. An endpoint is a web request that performs a task related to the entity it falls under.<br>
As an example, shown below is the <strong>users</strong> entity.</p>

<p><img src="images/usersentity.jpg" alt="Usersentity" /></p>

<p>Here, you can see the list of endpoints associated with the <strong>users</strong> entity. For clarity purposes, they are color coded based on what method is being used. To the right of each list item, there is a brief description of what the entity does.<br>
When an item in this list is clicked, the interface expands to show the information relevant to the selected endpoint.</p>

<p>Click on the endpoint <strong>GET /rest /users/me</strong>.</p>

<p><img src="images/get_rest_users_me.png" alt="Get rest users me" /></p>

<p>You can go over the details for this endpoint. In summary, it returns a JSON representation of the entity that is populated with information that the access token represents. This information is tied to the current user. After going  over the information for the endpoint, click the <strong>Try it out!</strong> button.  </p>

<p><img src="images/try_it_out.png" alt="Try it out" /></p>

<p>In the <strong>Response Body</strong> section, there will be a JSON object of the <strong>users</strong> class, and it will contain the current user&#39;s information.</p>
<h1 id='creating-api-requests'>Creating API Requests</h1>
<p>When making web requests to the API from your own application, make sure to include your token in the header for your request. The steps for obtaining this token were outlined in the <a href="#getatoken">Obtaining a Token</a> section.  </p>

<p>This section will outline how to include the token in your request from a third-party application</p>

<p>Most modern web browsers either come with a set of developer tools, for example, Chrome Developer Tools or have a set that can be found online, for example, Firebug for Firefox. In the developer tools, there will generally be a Network tab that will show all network calls being made through the browser. In addition, there are a number of standalone software application that can be used to do this, for example, Fiddler, Wireshark, Charles Proxy.</p>

<p><img src="images/request_head.png" alt="Request head" /></p>

<p>Using the developer tools, if an endpoint is executed, the browser sends out request with the following header.  </p>

<p>The most important part of this header is the Authorization field, which contains the word &quot;Bearer&quot; followed by a space, followed by your token string. The word &quot;Bearer&quot; describes the type of token that is being used for authentication. This is the exact format the authorization field in the request headers should be in order to perform this request successfully. It should read exactly like:  </p>

<p>Authorization: Bearer <strong>token string</strong>  </p>

<p>Where <strong>token string</strong> is replaced with the actual token string.</p>
<h1 id='using-api-requests'>Using API Requests</h1>
<p>In the response header shown below, the field called <strong>X-Accellion-Location</strong>, indicates what object is being acted upon.  </p>

<aside class="notice">

In the case of an error, this field might not indicate the object being acted upon. </aside>  

<p>In this example the object being acted upon is the current user. In this case, the information about this user is just being returned. However, when adding, removing, updating, or otherwise editing objects, it is critical to make note of which object is being acted upon.  </p>

<p>The response of the request is the JSON object. Here, it is important to note that every object has an id element, which is the unique identifier for the object with respect to all other objects of that entity type. Most of the endpoints that get and/or modify a specific data will require the id of the object that corresponds to the data.  </p>

<p><img src="images/response_head.png" alt="Response head" /></p>
<h1 id='using-id'>Using id</h1>
<p>Another request can be made that uses an <strong>id</strong> to uniquely identify the object you want to get. In this example a folder object is being created that represents the <strong>My Folder</strong> folder for the current user.</p>

<p>The folders entity does not have an endpoint to return the current user&#39;s <strong>My Folder</strong> folder. The general endpoint for getting folders visible to the current user will have to be used, and the <strong>id</strong> of the folder must be given in the request to specify which folder to get.  </p>

<p><img src="images/get_rest_folder_id.png" alt="Get rest folder id" /></p>

<p>There are a number of ways to get the <strong>id</strong> of the <strong>My Folder</strong> folder for the current user.</p>

<p>Make the <strong>GET /rest/users/me</strong> request. In the response of that request, there is a <strong>links</strong> array, in which there is an element identified as <strong>syncdir</strong>. The <strong>id</strong> associated with that element is the <strong>id</strong> of the <strong>My Folder</strong> folder for this user.</p>

<p><img src="images/syncdir.jpg" alt="Syncdir" /></p>

<p>This method of obtaining the id is specific to the <strong>My Folder</strong> folder of the user, and it cannot be used to get the <strong>id</strong> of any folder. A more general way to obtain the <strong>id</strong> of a folder is to navigate to that folder in the kiteworks UI. Once there, observe the URL.  </p>

<p>The URL should read <strong>https://<hostname>/#/folder/</strong> followed by a number. That number is the <strong>id</strong> of the folder that is currently open.</p>

<p><img src="images/folder_number.png" alt="Folder number" />  </p>

<p>In some instances URLs are not available in the <strong>id</strong>.  In those cases, the best way to get the <strong>id</strong> of a specific object would be to use the corresponding endpoint that lists all instances of the class you are interested in. From the list, you can then pick which instance is the one you are interested in, and from there, you can get the <strong>id</strong>.   </p>

<p>Plug in the <strong>id</strong> of the <strong>My Folder</strong> folder in the web request and the response will be a JSON payload that contains information relevant to that folder.</p>

<p><img src="images/folderinfo.jpg" alt="Folderinfo" /></p>
<h1 id='creating-objects'>Creating Objects</h1>
<p>In the Developer Documentation website, click on the endpoint under <strong>folders</strong> which is <strong>Create a new folder</strong>. The <strong>parent id</strong> expected in this request is the id of the folder that is being created in the new folder.  </p>

<p>As a creation request for the API, this endpoint requires some information for the object that is being created. The Developer Documentation outlines the format that this information should be provided in. This can be found under the <strong>Data Type</strong> of the body parameter. In this case, the name is the only requirement. The required information is expected to be in the Request Payload of the request. In addition, there are options to add a description and specify if the folder is syncable. If these options are used, that information should also be included in the Request Payload.  </p>

<p><img src="images/postrestfolders.png" alt="Postrestfolders" /></p>

<p>Note that the <strong>Request Payload</strong> is expected to be JSON and that the Content-Type must be <strong>application/json</strong>.  </p>

<p><img src="images/reqpayload.jpg" alt="Reqpayload" />  </p>

<p>If successful, the response&#39;s header will look like this.  </p>

<p>The most important part of this response is the <strong>X-Accellion-Location</strong> field. This is an indicator of which object is being acted upon. In the case of creating an object, this will be the new object that you have created. This will also be a way to get the <strong>id</strong> of the object, for future use.</p>

<p><img src="images/resheader.jpg" alt="Resheader" /></p>

<p>To add one of your contacts as a downloader and if you do not have any contacts or you would not like to share this folder with any of your existing contacts, you can use the <strong>POST /rest/contacts</strong> endpoint under the <strong>contacts</strong> entity to create another contact.</p>

<p><img src="images/postrestcontacts.png" alt="Postrestcontacts" /></p>

<p>For this endpoint, you will need to supply a contact name and an email address. The <strong>Request Payload</strong> should look like this.</p>

<p><img src="images/reqpayload1.jpg" alt="Reqpayload1" /></p>

<p>Again, make note of the <strong>X-Accellion-Location</strong> field in the response header, where you can find the <strong>id</strong> for the contact that was created.</p>

<p>Use the <strong>GET /rest/contacts/{id}</strong> endpoint, filling in the necessary <strong>id</strong> with the one we took from the last response header, to get the information for this contact.</p>

<p><img src="images/getrestcontacts.png" alt="Getrestcontacts" /></p>

<p>Inside the response for this endpoint, there is an <strong>Items</strong> array, and the first element of that array contains a <strong>links</strong> array. That array contains an element that has a field called <strong>entity</strong> with the value <strong>user</strong>. This indicates that the data in this element corresponds to the <strong>user</strong> that is associated with this <strong>contact</strong>. Inside that element, there should also be an <strong>id</strong> field. This is more clearly shown in the next figure</p>

<p><img src="images/idfield.jpg" alt="Idfield" />  </p>

<p>To add a contact to this <strong>folder</strong> as a downloader, go to the folders entity, and click on the <strong>POST /rest/folders/{id}/members</strong> entity. In the actual request, the <strong>id</strong> is the <strong>id</strong> of the folder you want to add the user to. In this case, it would be the <strong>id</strong> of the folder we created earlier in <strong>My Folder</strong>.</p>

<p><img src="images/postrestfoldersid.png" alt="Postrestfoldersid" /></p>

<p>The <strong>Request Payload</strong> for this web request should contain both the <strong>userId</strong> for the contact you want to add (which we obtained from the previous web request) and the <strong>roleId</strong>. A comprehensive list of every role and associated <strong>roleId</strong> can be obtained through the <strong>GET /rest/roles</strong> endpoint under the <strong>roles</strong> entity.</p>

<p><img src="images/getroles.jpg" alt="Getroles" /></p>

<p>From the response of this web request, we can observe that a downloader&#39;s corresponding role Id is 2. The <strong>Request Payload</strong> should be formatted as follows.</p>

<p><img src="images/reqpayload2.jpg" alt="Reqpayload2" /></p>

<p>After successfully performing this, you have created a folder and added a contact to it as a downloader. Now, this contact has visibility into this folder and the ability to download files from it. </p>
<h1 id='adding-files'>Adding Files</h1>
<p>To add a file to the folder, we need to use the <strong>POST /rest/folders/{id}/actions/file</strong> endpoint under the <strong>files</strong> entity</p>

<p><img src="images/addfile.jpg" alt="Addfile" /></p>

<p>Here, the id required in the web request is the id of the folder that the file should be added into. In this case, the <strong>id</strong> indicated in the <strong>X-Accellion-Location</strong> field of the response header can be used when we created the folder. The file also needs to be attached, which is done via a multiple MIME request. </p>

<p>Again, the <strong>id</strong> of the new uploaded file can be found in the <strong>X-Accellion-Location</strong> field of the response header of this request. Note this <strong>id</strong>, because we are going to use it to download this file in the next section. </p>

<p>Again, the <strong>id</strong> of the new uploaded file can be found in the <strong>X-Accellion-Location</strong> field of the response header of this request. </p>

<p><img src="images/respheader1.jpg" alt="Respheader1" /></p>
<h2 id='adding-large-files'>Adding Large Files</h2>
<p>The caller can request the APIs to upload or download any kind and size of file successfully under normal conditions. kiteworks can also handle corner cases and report exceptions and errors logically.</p>
<h3 id='chunk-upload-workflow'>Chunk Upload Workflow</h3>
<p>Chunk Upload is aimed to let users upload large files by parts. This section briefly describes the workflow of a chunk upload.</p>
<h3 id='chunk-upload-process-steps'>Chunk Upload Process Steps</h3><h3 id='upload-session-initialization'>Upload session initialization</h3>
<p>The user can upload a new file to a folder or upload a new version of an existing file. To initiate a new file upload call:
<strong>POST /folders/{id}/actions/initiateUpload</strong>
<strong>{id}</strong> - Destination folder ID</p>

<p>To initiate a new file version upload call:
<strong>POST /files/{file_id}/actions/initiateUpload</strong>
<strong>{file_id}</strong> - ID of the file for the file version</p>

<p>If you call <strong>POST /folders/{id}/actions/initiateUpload</strong> with filename that already exists in this directory, the new version of this file will be created.
 </p>
<h3 id='request-body-parameters-description'>Request Body Parameters Description</h3>
<ul>
<li>filename (required) - Filename that will be created after upload session completion</li>
<li>totalSize (optional, required if totalChunks was sent) - File size in bytes</li>
<li>totalChunks (optional, required if totalSize was sent) - Amount of chunks that file is split to</li>
</ul>

<p>Chunk upload supports two different workflows. The first one requires <strong>totalSize</strong> and <strong>totalChunks</strong>, the second one does not require these fields, but it requires to send **lastChunk field equals to 1 with the last chunk upload (see more details below). The first workflow is preferable since server is able to validate total file content at the end of upload session.</p>

<ol>
<li>To follow first workflow, send all fields listed above.</li>
<li>(SFTP Client) The second workflow is meant to be uses by the SFTP client. The SFTP client cannot know the <strong>totalSize</strong> and <strong>totalChunks</strong> when an upload session is initiated. Send only the <strong>filename</strong> if you want to follow this workflow.</li>
</ol>

<p>If upload initialization was successful, response headers will contain <strong>X-Accellion-Location</strong> field with upload id value. For example:
<strong>{ ..., &quot;X-Accellion-Location&quot;: &quot;http://homeurl.com/rest/uploads/1&quot;, ... }</strong>
Where <strong>1</strong> is an upload session ID. Use this ID to perform all further operations.</p>
<h3 id='retrieve-upload-session-data'>Retrieve Upload Session Data</h3>
<p>After initialization each upload session will have assigned an &quot;uri&quot; parameter. This parameter contains uri where all chunks for this upload session should be uploaded. To retrieve this parameter call:
<strong>GET /uploads/{id}</strong></p>

<p><strong>Response Body Parameters Description</strong><br>
<strong>userId</strong> - Upload session owner user ID<br>
<strong>timestamp</strong> - Upload session creation date.<br>
<strong>totalSize</strong> - Total size of the file which was set in upload session initialization.<br>
<strong>totalChunks</strong> - Amount of expected chunks amount, which was set in upload session initialization.<br>
<strong>clientCookie</strong> - Client cookie field.<br>
<strong>clientName</strong> - Client ID which is assigned to upload session owner.<br>
<strong>svrUploadTime</strong> - Amount of time in milliseconds that was spent on uploading all uploaded file chunks.<br>
<strong>error</strong> - Last error message of the chunk upload, if any.<br>
<strong>completeOk</strong> - Boolean flag, equals to 0 if session is not completed (not all chunks was uploaded). Equals to 1 if upload session is finished. But since upload session is deleted after successful finish, this parameter will always be equal to 0 if upload session exists.<br>
<strong>uri</strong> - Uri where all chunks for this upload session should be uploaded.<br>
Format of the uri is <strong>{host_name}/rest/uploads/{id}</strong>.<br>
Example: <strong>dacfs_upload1/rest/uploads/1</strong>.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>dacfs_upload1</strong> - is a host name.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>1</strong> - is an upload ID.<br>
The host name parameter from the uri field is determined by the server according to user location settings. The host may be remote or local. If there is any local host, the file will be saved at the local host. If there is no local host to upload, the file will be sent to available remote host.</p>
<h3 id='upload-chunks'>Upload Chunks</h3>
<p>After retrieving correct endpoint for the chunks upload (uri field), you can upload all file chunks starting from the first one. To do so, call:
<strong>POST {host_name}/rest/uploads/{id}</strong></p>
<h3 id='request-body-parameters-description-2'>Request Body Parameters Description</h3>
<p><strong>compressionMode</strong> (required, optional if <strong>lastChunk</strong> = 1) - Compression mode for the chunk content. Available and valid modes:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NORMAL - file chunk content is uploaded without compression (as is)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GZIP - file chunk content is compressed using https://en.wikipedia.org/wiki/Gzip format<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZLIB - file chunk content is compressed using https://en.wikipedia.org/wiki/Zlib format<br>
<strong>compressionSize</strong> (required, optional if <strong>lastChunk</strong> = 1)  - File chunk content size in bytes after compression. If <strong>compressionMode</strong> is set to NORMAL, then <strong>compressionSize</strong> should match with <strong>originalSize</strong>.<br>
<strong>originalSize</strong> (required, optional if <strong>lastChunk</strong> = 1) - File chunk original size in bytes.<br>
<strong>content</strong> (required, optional if <strong>lastChunk</strong> = 1) - File chunk content string that is converted into base64 string https://en.wikipedia.org/wiki/Base64. User should encode the file content into base64 string after compression (if there is any compression applied), not before.<br>
<strong>lastChunk</strong> (optional, 1 or 0 value) - This field allows to mark current chunk as the last one and finish upload session. It can be used only for the second workflow (SFTP Client). If the user initiated upload following SFTP Client workflow and sending this field equal to 1 and content field is not empty, then all fields from above (<strong>compressionMode</strong>, <strong>compressionSize</strong>, <strong>originalSize</strong>, <strong>content</strong>, <strong>lastChunk</strong>) will be optional.</p>

<p>Upload all chunks starting from the first one. After successful uploading the first chunk the user should receive the 200 response code. After uploading the last chunk the user should receive the 201 response code and the created file ID in a response header field &quot;X-Accellion-Location&quot;. For example:<br>
<strong>{ ..., &quot;X-Accellion-Location&quot;: &quot;http://homeurl.com/rest/files/1&quot;, ... }</strong><br>
Where <strong>1</strong> - is a file ID. </p>

<p>Depending on what workflow you chose at the upload initialization, the chunk upload workflow can be different:<br>
1.  If <strong>totalSize</strong> and <strong>totalChunks</strong> were sent, the upload session will be finished automatically after the last chunk is be uploaded. For example, if <strong>totalChunks</strong> = 4, then server will accept the fourth chunk as the last one and will finish the upload session. If <strong>totalChunks</strong> was set in upload initialization, this upload session cannot be finished by sending the chunk with <strong>lastChunk</strong> = 1.<br>
2.  (For the SFTP Client) If <strong>totalSize</strong> and <strong>totalChunks</strong> was not sent, the upload session will be finished only if user send the chunk with <strong>lastChunk</strong> = 1. The server will accept this chunk as the last one and will finish the upload session. For this last chunk the server will not perform content validation.</p>

<p><strong>NOTES</strong>
For more information, go to the Developer Portal at <a href="https://developer.kiteworks.com">https://developer.kiteworks.com</a> to download a demo and view the Developer Guide.  Important Note:  Despite the fact that if <strong>lastChunk</strong> = 1 then all other chunk fields became optional, if user sends content with some value and <strong>lastChunk</strong> = 1, the server will validate this chunk content and all other fields (<strong>compressionMode</strong>, <strong>compressionSize</strong>, <strong>originalSize</strong>) will be required and validated.</p>
<h3 id='terminating-upload-session'>Terminating Upload Session</h3>
<p>The user can terminate the upload session by calling:<br>
<strong>DELETE /uploads/{id}</strong></p>

<p><strong>NOTES</strong>
Chunk upload requests requires data transformation, that can hardly be done without code help (split file into chunks, encode file content, create content fingerprint, etc.). The following php script is an example that will generate all needed data for whole chunk upload process for the NORMAL compress mode. The script will generate data for 4 chunks. The script may be upgraded to support different compression modes and chunks amount.</p>
<h3 id='generate_chunks_data-php-download'>Generate_chunks_data.php – Download</h3>
<p>To view the sample code, click on the <strong>php</strong> tab on the right panel.</p>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">ChunkGenerator</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="no">COMPRESSION_NORMAL</span> <span class="o">=</span> <span class="s1">'NORMAL'</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">COMPRESSION_GZIP</span> <span class="o">=</span> <span class="s1">'GZIP'</span><span class="p">;</span>
    <span class="k">const</span> <span class="no">COMPRESSION_ZLIB</span> <span class="o">=</span> <span class="s1">'ZLIB'</span><span class="p">;</span>

    <span class="k">public</span> <span class="nv">$validCompression</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nx">self</span><span class="o">::</span><span class="na">COMPRESSION_NORMAL</span><span class="p">,</span>
        <span class="nx">self</span><span class="o">::</span><span class="na">COMPRESSION_GZIP</span><span class="p">,</span>
        <span class="nx">self</span><span class="o">::</span><span class="na">COMPRESSION_ZLIB</span>
    <span class="p">];</span>

    <span class="sd">/**
     * Create test file data
     *
     * @param int $totalChunks
     * @param string $compressionMode
     * @return array
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initiateFileData</span><span class="p">(</span><span class="nv">$compressionMode</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">COMPRESSION_NORMAL</span><span class="p">,</span> <span class="nv">$totalChunks</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$fileData</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">]</span>     <span class="o">=</span> <span class="nb">uniqid</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'_test_file.txt'</span><span class="p">;</span>
        <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]</span>      <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateRandomString</span><span class="p">();</span>
        <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'totalChunks'</span><span class="p">]</span>  <span class="o">=</span> <span class="nv">$totalChunks</span><span class="p">;</span>
        <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'clientCookie'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'filename'</span><span class="p">];</span>

        <span class="nv">$fileData</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">splitFileIntoChunks</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">,</span> <span class="nv">$compressionMode</span><span class="p">);</span>

        <span class="nb">unset</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]);</span> <span class="c1">// We don't need this for the qa
</span>
        <span class="k">return</span> <span class="nv">$fileData</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**
     * Split file content into chunks
     *
     * @param array $fileData
     * @param string $compressionMode
     * @return mixed
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">splitFileIntoChunks</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">,</span> <span class="nv">$compressionMode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'totalSize'</span><span class="p">]</span>   <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]);</span>
        <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'mimeType'</span><span class="p">]</span>    <span class="o">=</span> <span class="s1">'text/plain'</span><span class="p">;</span>
        <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'timestamp'</span><span class="p">]</span>   <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
        <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'fingerprint'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]);</span>

        <span class="nv">$chunkSize</span> <span class="o">=</span> <span class="nb">ceil</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">[</span><span class="s1">'totalSize'</span><span class="p">]</span> <span class="o">/</span> <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'totalChunks'</span><span class="p">]);</span>

        <span class="nv">$split</span> <span class="o">=</span> <span class="nb">chunk_split</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">[</span><span class="s1">'content'</span><span class="p">],</span> <span class="nv">$chunkSize</span><span class="p">);</span>
        <span class="nv">$chunksContent</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">"</span><span class="se">\r\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$split</span><span class="p">);</span>
                <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'chunks'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$chunksContent</span> <span class="k">as</span> <span class="nv">$i</span> <span class="o">=&gt;</span> <span class="nv">$originalContent</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$originalContent</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$compressedContent</span> <span class="o">=</span> <span class="nv">$originalContent</span><span class="p">;</span>
                <span class="k">switch</span> <span class="p">(</span><span class="nv">$compressionMode</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">case</span> <span class="nx">self</span><span class="o">::</span><span class="na">COMPRESSION_NORMAL</span><span class="o">:</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="nx">self</span><span class="o">::</span><span class="na">COMPRESSION_GZIP</span><span class="o">:</span>
                        <span class="nv">$compressedContent</span> <span class="o">=</span> <span class="nb">gzencode</span><span class="p">(</span><span class="nv">$originalContent</span><span class="p">);</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="nx">self</span><span class="o">::</span><span class="na">COMPRESSION_ZLIB</span><span class="o">:</span>
                        <span class="nv">$compressedContent</span> <span class="o">=</span> <span class="nb">gzcompress</span><span class="p">(</span><span class="nv">$originalContent</span><span class="p">);</span>
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'chunks'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'index'</span><span class="p">]</span>           <span class="o">=</span> <span class="nv">$i</span><span class="p">;</span>
                <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'chunks'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'originalSize'</span><span class="p">]</span>    <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$originalContent</span><span class="p">);</span>
                <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'chunks'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'fingerprint'</span><span class="p">]</span>     <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$originalContent</span><span class="p">);</span>
                <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'chunks'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'content'</span><span class="p">]</span>         <span class="o">=</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$compressedContent</span><span class="p">);</span>
                <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'chunks'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'compressionMode'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$compressionMode</span><span class="p">;</span>
                <span class="nv">$fileData</span><span class="p">[</span><span class="s1">'chunks'</span><span class="p">][</span><span class="nv">$i</span><span class="p">][</span><span class="s1">'compressionSize'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$compressedContent</span><span class="p">);</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nb">unset</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">[</span><span class="s1">'chunks'</span><span class="p">][</span><span class="nv">$i</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$fileData</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">generateRandomString</span><span class="p">(</span><span class="nv">$repeat</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">str_repeat</span><span class="p">(</span><span class="nb">md5</span><span class="p">(</span><span class="nb">time</span><span class="p">()),</span> <span class="nv">$repeat</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$chunkGenerator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ChunkGenerator</span><span class="p">();</span>

<span class="nv">$fileData</span> <span class="o">=</span> <span class="nv">$chunkGenerator</span><span class="o">-&gt;</span><span class="na">initiateFileData</span><span class="p">();</span>

<span class="nb">print_r</span><span class="p">(</span><span class="nv">$fileData</span><span class="p">);</span>
</code></pre>
<p>To launch this script, launch terminal, navigate to a folder where this script is located and execute this command:
<code>
“php generate_chunks_data.php”
</code>
The script will display all the data in your terminal window.</p>
<h1 id='downloading-files'>Downloading Files</h1>
<p>The first <strong>id</strong> needed for this web request is the <strong>id</strong> of the file to be downloaded. Once the web request returns, your response should be the file that was added.</p>

<aside class="notice">

Files that are not text files will have a garbled response when downloaded using the Developer Documentation page. </aside>  

<p><img src="images/getrestidcontent.png" alt="Getrestidcontent" /></p>
<h1 id='apis-overview'>APIs Overview</h1>
<p>kiteworks APIs provide broad coverage of the platform. The APIs can be categorized into <strong>Content</strong>, <strong>Collaboration</strong>, <strong>Preferences</strong>, <strong>Contacts</strong>, <strong>Security</strong>, <strong>Clients</strong>, and <strong>kiteworks Maintenance APIs</strong>.</p>
<h2 id='content-apis'>Content APIs</h2>
<p>Content-related APIs provide access to user content in your application. You will be able to access and manage files and folders as a part of the business flows of your app and work with files from various enterprise content sources like Microsoft SharePoint or EMC Documentum.</p>
<h3 id='users'>users</h3>
<p><strong>users</strong> APIs enable your application to obtain basic information about the user, user&#39;s root folders, and provide a starting point to further navigate through the files and folders the user has access to. By using the <strong>/users/me</strong> endpoint, you can obtain the ID of the user, the IDs of the root folder for this user, the email address or the name of the user, and status of the user (active, deleted).  </p>

<p>Complete details of the <strong>users</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/users</em>.  </p>
<h3 id='folders'>folders</h3>
<p>The next step is to work with the files and <strong>folders</strong> accessible to the authenticated user.  </p>

<p>Complete details of the <strong>folder</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/folders</em>.   </p>
<h3 id='files'>files</h3>
<p>Together with folders, <strong>files</strong> are another fundamental entity that your application will have at its disposal. </p>

<p>Complete details of the <strong>files</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/files</em>.</p>
<h3 id='sources'>sources</h3>
<p>One of the advantages of the kiteworks Content Platform is its ability to securely connect to existing enterprise content sources through a single user interface. Using the <strong>sources</strong> APIs, your application can access and manage EC content sources in a similar fashion.</p>

<p>Complete details of the <strong>sources</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/sources</em>.</p>
<h2 id='collaboration-apis'>Collaboration APIs</h2>
<p>The collaboration-related APIs are intended to provide your application with the powerful collaboration tools that users have in kiteworks. In addition to being able to invite users to shared folders, these APIs allow users to collaborate on files and folders, construct and receive mail, add comments, and assign tasks.</p>
<h3 id='mail'>mail</h3>
<p>The <strong>mail</strong> APIs allow you to access emails sent and received on behalf of the user authenticated through your application.</p>

<p>Complete details of the <strong>mail</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/mail</em>.</p>
<h3 id='comments'>comments</h3>
<p>In addition to comments-related endpoints in <strong>/files</strong>, the <strong>/comments/</strong> endpoints allow you direct access to existing comments for update and delete actions.</p>

<p>Complete details of the <strong>comments</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/comments</em>.</p>
<h3 id='tasks'>tasks</h3>
<p>Similar to the <strong>/comments</strong> endpoint, the <strong>/tasks/</strong> endpoints allow you direct access to existing tasks for update and delete actions.</p>

<p>Complete details of the <strong>tasks</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/tasks</em>.</p>

<p> </p>
<h2 id='preferences-apis'>Preferences APIs</h2>
<p>kiteworks Content Management platform provides a set of APIs for preferences-related entities: <strong>folder notifications</strong>, <strong>favorite folders</strong>, <strong>languages</strong>, and <strong>time zones</strong>.</p>
<h3 id='notifications'>notifications</h3>
<p>The <strong>notifications</strong> entity endpoints allow the management of notification settings for important folders in the system for the given user.</p>

<p>Complete details of the <strong>notifications</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/notifications</em>.</p>
<h3 id='favorites'>favorites</h3>
<p>The <strong>favorites</strong> entity endpoints enable your application to manage the favorite folders for the authenticated user. </p>

<p>Complete details of the <strong>favorites</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/favorites</em>.</p>
<h3 id='languages'>languages</h3>
<p>The <strong>languages</strong> APIs provide your application with the ability to retrieve the languages supported by the kiteworks system.</p>

<p>Complete details of the <strong>languages</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/languages</em>.</p>
<h3 id='timezones'>timezones</h3>
<p>The <strong>timezones</strong> APIs enable your application with the ability to list all the time zones supported in the system, and get the details about the time zones, like the name and time offset.</p>

<p>Complete details of the <strong>timezones</strong> API is available at _your installation URL&gt;/rest/index.html#!/timezones.</p>
<h2 id='contacts-apis'>Contacts APIs</h2>
<p><strong>contacts</strong>
The <strong>contacts</strong> APIs provide your application with the ability to manage the user contacts.</p>

<p>Complete details of the <strong>contacts</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/contacts</em>.</p>
<h3 id='groups'>groups</h3>
<p>kiteworks provides end users with the ability to define personal contact <strong>groups</strong>. Personal groups can be used for allowing access to a folder, or for sending mail.</p>

<p>Complete details of the <strong>groups</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/groups</em>.</p>
<h3 id='ldap-groups'>LDAP Groups</h3>
<p>If your installation is integrated with LDAP, Administrators can enable <strong>LDAP</strong> groups to be available to end users when sharing folders. Your application will be able to add, update, or remove <strong>LDAP</strong> groups that are available to end users by utilizing the <strong>/ldapGroups/</strong> endpoints.</p>

<p>Complete details of the <strong>ldapGroups</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/ldapGroups</em>.</p>
<h2 id='security-apis'>Security APIs</h2><h3 id='profiles'>profiles</h3>
<p>The <strong>/profiles/</strong> endpoints allow your application to manage the privileges assigned to kiteworks users. Your application can identify the list of User Profiles in the system and inspect the features and settings associated with each User Profile.</p>

<p>Complete details of the <strong>profiles</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/profiles</em>.</p>
<h3 id='roles'>roles</h3>
<p>The <strong>roles</strong> APIs allow you to get the details of folder roles in the system.</p>

<p>Complete details of the <strong>roles</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/roles</em>.</p>
<h3 id='adminroles'>adminRoles</h3>
<p>The <strong>adminRoles</strong> APIs allow your application to manage the assignment of Administrator roles to users.</p>

<p><strong>NOTE</strong>:   In order to use the <strong>adminRoles</strong> APIs your application will need to authenticate with an Administrator user. Additionally, only System Administrator can promote a user to System Administrator, Application Administrator. A user cannot self-promote to a System Administrator.</p>

<p>Complete details of the <strong>adminRoles</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/adminRoles</em>.</p>
<h3 id='devices'>devices</h3>
<p>Users may access kiteworks from various devices: mobile phones, tablets, etc. Device endpoints can be used to track access of individual <strong>devices</strong> to user accounts, and perform remote wipe on any device.</p>

<p>Complete details of the <strong>devices</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/devices</em>.</p>
<h3 id='admin'>admin</h3>
<p>The <strong>admin</strong> APIs allow your application to perform administrative actions on many entities that exist in the system.
The endpoints are very similar to the endpoints of the actual entities, the difference is that your application will need to authenticate with an Administrator user in order to perform the calls.</p>

<ul>
<li>  <strong>Client Applications</strong>: using <strong>/admin/clients/</strong> endpoints, you can create and configure the configuration settings of the client applications registered with kiteworks, and list API Scopes available.</li>
<li>  <strong>Devices</strong>: using <strong>/admin/devices/</strong> endpoints you can find the list of user devices that are allowed to connect to kiteworks, log their access to the platform, and update, or remove them as necessary</li>
<li>  <strong>LDAP Groups</strong>: List, create or delete LDAP groups in the system</li>
<li>  <strong>License</strong>: Upload a new kiteworks license</li>
<li>  <strong>Locations</strong>: List, create, or delete kiteworks Locations: requires System Administrator, and is applicable for on-premises Enterprise and Enterprise Connect Packages only</li>
<li>  <strong>Profiles</strong>: List user Profiles. For details on profiles please refer to kiteworks Administration Guide</li>
<li>  <strong>Sources</strong>: List, add, update, remove Enterprise Connect sources</li>
<li>  <strong>Users</strong>: List, add, update, delete users, user settings, admin roles, profile image.</li>
</ul>

<p>Complete details of the <strong>admin</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/admin</em>.</p>
<h2 id='client-management-apis'>Client Management APIs</h2><h3 id='clients'>clients</h3>
<p>Using the <strong>clients</strong> APIs, you can register a new application, and manage the configurations for the applications allowed to connect to kiteworks.</p>

<p>Complete details of the <strong>clients</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/clients</em>.</p>
<h3 id='scopes'>scopes</h3>
<p>One of the main security and safety mechanisms for preventing unauthorized or accidental application use of the platform resources is the Administrator ability to set the API <strong>scopes</strong> for each application. kiteworks Content Platform provides the <strong>/scopes</strong> endpoint that allows applications to determine the APIs supported by the platform, so the application can properly construct the API calls to the platform.</p>

<p>Complete details of the <strong>scopes</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/scopes</em>.</p>
<h2 id='kiteworks-maintenance-apis'>kiteworks Maintenance APIs</h2><h3 id='licenses'>licenses</h3>
<p>If your application is in charge of updating the license of your kiteworks installation it can use the <strong>/licenses</strong> endpoint to upload a new license.</p>

<p>Complete details of the <strong>licenses</strong> API is available at <em>your installation URL&gt;/rest/index.html#!/licenses</em>.</p>
<h1 id='common-use-cases'>Common Use Cases</h1><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// --- Generic helper function to make CURL calls based on the protocol --- 
</span>
<span class="k">function</span> <span class="nf">jsonCurl</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="nv">$json_data</span><span class="p">,</span> <span class="nv">$arr_params</span> <span class="o">=</span> <span class="k">NULL</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span><span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="c1">// Do not add POSTFIELDS for a GET request
</span>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nv">$arr_params</span> <span class="o">&amp;&amp;</span> <span class="nb">array_key_exists</span><span class="p">(</span><span class="s1">'protocol'</span><span class="p">,</span> <span class="nv">$arr_params</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$arr_params</span><span class="p">[</span><span class="s1">'protocol'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'get'</span><span class="p">))</span> <span class="p">{</span>
        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$json_data</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$arr_params</span> <span class="o">&amp;&amp;</span> <span class="nb">array_key_exists</span><span class="p">(</span><span class="s1">'header'</span><span class="p">,</span> <span class="nv">$arr_params</span><span class="p">))</span> <span class="p">{</span>
        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$arr_params</span><span class="p">[</span><span class="s1">'header'</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s2">"Content-type: application/json"</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="nv">$error</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="nv">$curl_http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="nv">$arr_response</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nv">$arr_response</span><span class="p">[</span><span class="s1">'response'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
    <span class="nv">$arr_response</span><span class="p">[</span><span class="s1">'error'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$error</span><span class="p">);</span>
    <span class="nv">$arr_response</span><span class="p">[</span><span class="s1">'curl_http_code'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$curl_http_code</span><span class="p">;</span>
    <span class="k">return</span> <span class="nv">$arr_response</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>
<p>The following examples make use of the access token received in the <a href="#authentication">Authentication</a> section above to interact with the server.</p>

<p>On the right, we have a helper function that makes the actual HTTP call to the Accellion server. It takes in the endpoint URL, input data in the form of JSON and HTTP parameters in an array.</p>

<p>This function will be used in the following code samples for different use cases.  </p>

<p>To view the sample code, click on the <strong>php</strong> tab on the right panel. </p>
<h2 id='list-folder-contents'>List folder contents</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">'CONST_EAPI_VERSION'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>   <span class="c1">// Put the latest API version in place of 9
</span>
<span class="nv">$oAuthToken</span> <span class="o">=</span> <span class="s2">"GET-OAUTH-TOKEN"</span><span class="p">;</span>    <span class="c1">// Use the code in getOAuthToken.php to get the token
</span>
<span class="c1">// --- Configuration Section ---
</span><span class="nv">$folderId</span>           <span class="o">=</span> <span class="s1">'YOUR-FOLDER-ID'</span><span class="p">;</span>
<span class="nv">$kiteworks_hostname</span> <span class="o">=</span> <span class="s1">'YOUR-SERVER.DOMAIN.ORG'</span><span class="p">;</span>

<span class="nv">$api_end_point</span> <span class="o">=</span> <span class="s2">"https://</span><span class="nv">$kiteworks_hostname</span><span class="s2">/rest/folders/</span><span class="nv">$folderId</span><span class="s2">/children?deleted=false"</span><span class="p">;</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
            <span class="s2">"Accept: application/json"</span><span class="p">,</span>
            <span class="s2">"X-Accellion-Version: "</span> <span class="o">.</span> <span class="nx">CONST_EAPI_VERSION</span><span class="p">,</span>
            <span class="s2">"Authorization: Bearer </span><span class="nv">$oAuthToken</span><span class="s2">"</span> <span class="p">);</span>

<span class="c1">// --- Passing additional information about protocol and headers to the generic helper function --- 
</span><span class="nv">$arr_params</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nv">$arr_params</span><span class="p">[</span><span class="s1">'header'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$headers</span><span class="p">;</span>
<span class="nv">$arr_params</span><span class="p">[</span><span class="s1">'protocol'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'get'</span><span class="p">;</span>

<span class="nv">$postData</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>    <span class="c1">//  API uses GET protocol. Does not require POST data. Initializing for the generic helper function
</span><span class="nv">$arr_capi_response</span> <span class="o">=</span> <span class="nx">jsonCurl</span><span class="p">(</span><span class="nv">$api_end_point</span><span class="p">,</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$postData</span><span class="p">),</span> <span class="nv">$arr_params</span><span class="p">);</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$arr_capi_response</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<p>In <a href="#call-an-endpoint">Call an endpoint</a> section above, you called <strong>GET /rest/users/me</strong> to retrieve basic information about the current user (yourself). One of the attributes returned was &quot;syncdirId&quot;, which refers to your automatically created default &quot;My Folder&quot;.</p>

<p>In this section, you will use the <strong>GET /rest/folders/{folder ID}/children</strong> endpoint to get the list of items (files and sub-folders) inside this folder.</p>

<p>In the code sample on the right, replace &quot;YOUR-FOLDER-ID&quot; with the value of &quot;syncdirId&quot; (or the ID of any other folder you have access to). Also, replace &quot;GET-OAUTH-TOKEN&quot; with the access token retrieved in the <a href="#authentication">Authentication</a> section, and &quot;YOUR-SERVER.DOMAIN.ORG&quot; with the hostname of your Accellion server.</p>

<p>Then, copy and paste the script on a machine that has PHP installed and run it. You will see the server response with the contents of your My Folder in JSON format.</p>
<h2 id='download-file'>Download file</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">'CONST_EAPI_VERSION'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>    <span class="c1">// Put the latest API version in place of 9
</span>
<span class="nv">$oAuthToken</span> <span class="o">=</span> <span class="s2">"GET-OAUTH-TOKEN"</span><span class="p">;</span>    <span class="c1">// Use the code in getOAuthToken.php to get the token
</span>
<span class="c1">// --- Configuration Section ---
</span><span class="nv">$fileId</span>           <span class="o">=</span> <span class="s1">'YOUR-FILE-ID'</span><span class="p">;</span>
<span class="nv">$kiteworks_hostname</span> <span class="o">=</span> <span class="s1">'YOUR-SERVER.DOMAIN.ORG'</span><span class="p">;</span>

<span class="nv">$api_end_point</span> <span class="o">=</span> <span class="s2">"https://</span><span class="nv">$kiteworks_hostname</span><span class="s2">/rest/files/</span><span class="nv">$fileId</span><span class="s2">/content"</span><span class="p">;</span>
<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"Content-Type: application/json"</span><span class="p">,</span>
            <span class="s2">"Accept: application/json"</span><span class="p">,</span>
            <span class="s2">"X-Accellion-Version: "</span> <span class="o">.</span> <span class="nx">CONST_EAPI_VERSION</span><span class="p">,</span>
            <span class="s2">"Authorization: Bearer </span><span class="nv">$oAuthToken</span><span class="s2">"</span> <span class="p">);</span>

<span class="c1">// --- Passing additional information about protocol and headers to the generic helper function --- 
</span><span class="nv">$arr_params</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nv">$arr_params</span><span class="p">[</span><span class="s1">'header'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$headers</span><span class="p">;</span>
<span class="nv">$arr_params</span><span class="p">[</span><span class="s1">'protocol'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'get'</span><span class="p">;</span>

<span class="nv">$postData</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>    <span class="c1">//  API uses GET protocol. Does not require POST data. Initializing for the generic helper function
</span><span class="nv">$arr_capi_response</span> <span class="o">=</span> <span class="nx">jsonCurl</span><span class="p">(</span><span class="nv">$api_end_point</span><span class="p">,</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$postData</span><span class="p">),</span> <span class="nv">$arr_params</span><span class="p">);</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$arr_capi_response</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>
<p>Next, let&#39;s use the <strong>GET /rest/files/{file ID}/content</strong> endpoint to get the contents of a file.</p>

<p>In the code sample on the right, replace &quot;YOUR-FILE-ID&quot; with one of the file IDs returned in the folder listing response (or the ID of any other file you have access to). Also, replace &quot;GET-OAUTH-TOKEN&quot; with the access token retrieved in the <a href="#authentication">Authentication</a> section, and &quot;YOUR-SERVER.DOMAIN.ORG&quot; with the hostname of your Accellion server.</p>

<p>You will see the server response with the contents of your file in the &#39;response&#39; key.</p>
<h2 id='get-current-user-info'>Get current user Info</h2>
<p>This example demonstrates how to get a current user’s information.  </p>
<h3 id='http-method'>HTTP Method</h3>
<p>GET  </p>
<h3 id='request-url'>Request URL</h3>
<p>https://{hostname}/rest/users/me  </p>
<h3 id='request-body'>Request Body</h3>
<p>None  </p>
<h3 id='response'>Response</h3>
<p>The response is a <code>200 OK</code> status code. The response body contains a JSON representations of the user.  </p>
<h3 id='example-request'>Example Request</h3>
<p>To view the <strong>Example Request</strong> sample code, click on the <strong>cURL</strong> tab on the right panel.  </p>
<pre class="highlight shell tab-shell"><code>https://<span class="o">{</span>hostname<span class="o">}</span>/rest/users/me<span class="s1">' \
      -H '</span>Accept: application/json<span class="s1">' \
      -H '</span>Content-Type: application/json<span class="s1">' \
      -H '</span>X-Accellion-Version: 15<span class="s1">' \
      -H '</span>Authorization: Bearer <span class="o">{</span>access_token<span class="o">}</span>
</code></pre><h3 id='example-response'>Example Response</h3>
<p>To view the <strong>Example Response</strong> sample code, click on the <strong>json</strong> tab on the right panel.  </p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"basedirId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-06-28T02:20:12+0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deactivated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"flags"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"internal"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mydirId"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"profileIcon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1_e34981cfe2f471e31072fed529d83dfa395a9b540e7581d697f69f05935daaf3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Service Name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"suspended"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"syncdirId"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userTypeId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">  
</span></code></pre><h3 id='example-python-code'>Example Python Code</h3>
<p>To view the <strong>Example Python Code</strong> sample code, click on the <strong>Python</strong> tab on the right panel.  </p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">request</span>

<span class="n">access_token</span> <span class="o">=</span> <span class="s">"ca648ba442acfd8fa8a57962bf7fc8233df0d87c"</span>
<span class="n">api_version</span> <span class="o">=</span> <span class="s">"15</span><span class="err">
</span><span class="s">hostname = "</span><span class="n">hostname</span><span class="o">.</span><span class="n">com</span><span class="s">"</span><span class="err">

</span><span class="s">headers = {</span><span class="err">
</span><span class="s">    "</span><span class="n">Accept</span><span class="s">": "</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="s">",</span><span class="err">
</span><span class="s">    "</span><span class="n">X</span><span class="o">-</span><span class="n">Accellion</span><span class="o">-</span><span class="n">Version</span><span class="s">": api_version,</span><span class="err">
</span><span class="s">    "</span><span class="n">Authorization</span><span class="s">": "</span><span class="n">Bearer</span> <span class="p">{</span><span class="n">access_token</span><span class="p">}</span><span class="s">".format(access_token=access_token)</span><span class="err">
</span><span class="s">}</span><span class="err">
</span><span class="s">url = "</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="p">{</span><span class="n">hostname</span><span class="p">}</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">me</span><span class="s">".format(hostname=hostname)</span><span class="err">
</span><span class="s">response = requests.get(url=url, headers=headers)</span><span class="err">
</span><span class="s">current_user = response.json()  </span><span class="err">
</span></code></pre><h1 id='manage-folders'>Manage Folders</h1>
<p>This section gives examples for the following:  </p>

<ul>
<li>  Get top level folders<br></li>
<li>  Create a Folder<br></li>
<li>  Get a particular folder<br></li>
</ul>
<h2 id='get-top-level-folders'>Get top level folders</h2>
<p>This example demonstrates how to get a list of top level folders sorted by ascending order of the folder name.</p>
<h3 id='http-method-2'>HTTP Method</h3>
<p>GET</p>
<h3 id='request-url-2'>Request URL</h3>
<p>https://{hostname}/rest/folders/top</p>
<h3 id='request-body-2'>Request Body</h3>
<p>None</p>
<h3 id='response-2'>Response</h3>
<p>The response is a <code>200 OK</code> status code. The response body contains an array of JSON representations of the folder.  </p>

<p><strong>Example Request</strong><br>
To view the <strong>Example Request</strong> sample code, click on the <strong>cURL</strong> tab on the right panel. </p>
<pre class="highlight shell tab-shell"><code>https://<span class="o">{</span>hostname<span class="o">}</span>/rest/folders/top?orderBy<span class="o">=</span>name%3Aasc<span class="s1">' \
      -H '</span>Accept: application/json<span class="s1">' \
      -H '</span>Content-Type: application/json<span class="s1">' \
      -H '</span>X-Accellion-Version: 15<span class="s1">' \
      -H '</span>Authorization: Bearer <span class="o">{</span>access_token<span class="o">}</span><span class="s1">'
</span></code></pre>
<p><strong>Example Response</strong><br>
To view the <strong>Example Response</strong> sample code, click on the <strong>json</strong> tab on the right panel. </p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-06T04:36:09+0000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permDeleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"expire"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-14T07:35:29+0000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FolderA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"parentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permalink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">{hostname}</span><span class="se">\/</span><span class="s2">w</span><span class="se">\/</span><span class="s2">o8FOt1ycGVL8MEIN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"syncable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fileLifetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FolderA"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-06-28T02:20:12+0000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permDeleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"expire"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-08-22T07:04:40+0000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Folder"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"parentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permalink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">{hostname}</span><span class="se">\/</span><span class="s2">w</span><span class="se">\/</span><span class="s2">JKncWKCQrIURunW9"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"syncable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fileLifetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Folder"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Example Python Code</strong><br>
To view the <strong>Example Python Code</strong> sample code, click on the <strong>Python</strong> tab on the right panel.  </p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-Accellion-Version"</span><span class="p">:</span> <span class="n">api_version</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access_token}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://{hostname}/rest/folders/top?orderBy=name</span><span class="si">%3</span><span class="s">Aasc"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">response_json</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">folders</span> <span class="o">=</span> <span class="n">response_json</span><span class="p">[</span><span class="s">"data"</span><span class="p">]</span>
</code></pre><h2 id='create-a-folder'>Create a Folder</h2>
<p>This example demonstrates how to create a new top level folder named &quot;MyNewFolder&quot;.  <code>{folder_id} = 0</code> means the folder is created at the user&#39;s top level.</p>
<h3 id='http-method-3'>HTTP Method</h3>
<p>POST</p>
<h3 id='request-url-3'>Request URL</h3>
<p>https://{hostname}/rest/folders/{folder_id}/folders</p>
<h3 id='request-body-3'>Request Body</h3>
<p>`{
    &quot;name&quot;: &quot;MyNewFolder&quot;
}&#39;</p>
<h3 id='response-3'>Response</h3>
<p>If the folder is created successfully, the response is a <code>201 Created</code> status code. 
The response header <code>X-Accellion-Location</code> contains the URI that you can use for subsequent requests.
If <code>returnEntity=true</code> is specified in the query string, the response body contains a JSON representation of the data source, including a <code>id</code> property that you can use as the data source ID for subsequent requests.</p>

<p><strong>Example Request</strong><br>
To view the <strong>Example Request</strong> sample code, click on the <strong>cURL</strong> tab on the right panel.   </p>
<pre class="highlight shell tab-shell"><code>   -X POST <span class="s1">'https://{hostname}/rest/folders/0/folders?returnEntity=true'</span> <span class="se">\</span>
   -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'X-Accellion-Version: 15'</span> <span class="se">\</span>
   -H <span class="s1">'Authorization: Bearer {access_token}'</span> <span class="se">\</span>
   -d <span class="s1">'{"name": "MyNewFolder"}'</span>
</code></pre>
<p><strong>Example Response</strong><br>
To view the <strong>Example Response</strong> sample code, click on the <strong>json</strong> tab on the right panel.   </p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T05:33:19+0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"permDeleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expire"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T05:33:19+0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewFolder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"permalink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">{hostname}</span><span class="se">\/</span><span class="s2">w</span><span class="se">\/</span><span class="s2">DD9J7QUIz1kj6ZPR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"syncable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fileLifetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewFolder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"maxFolderExpiration"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"maxFileLifetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Example Python Code</strong><br>
To view the <strong>Example Python Code</strong> sample code, click on the <strong>Python</strong> tab on the right panel.    </p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-Accellion-Version"</span><span class="p">:</span> <span class="n">api_version</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access_token}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://{hostname}/rest/folders/{folder_id}/folders?returnEntity=true"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">,</span> <span class="n">folder_id</span><span class="o">=</span><span class="n">folder_id</span>
<span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"name"</span><span class="p">:</span> <span class="n">folder_name</span>
<span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="n">folder</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><h2 id='get-a-particular-folder'>Get a particular folder</h2>
<p>This example demonstrates how to retrieve the folder (MyNewFolder) that you created in the previous example. When you create a new data source, the <code>dataStreamId</code> includes a unique identifier (shown as &quot;1234&quot; in these examples). Be sure to use the id from the data source you created.</p>
<h3 id='http-method-4'>HTTP Method</h3>
<p>GET</p>
<h3 id='request-url-4'>Request URL</h3>
<p>https://{hostname}/rest/folders/{folder_id}</p>
<h3 id='request-body-4'>Request Body</h3>
<p>None</p>
<h3 id='response-4'>Response</h3>
<p>If the data source exists, the response is a <code>200 OK</code> status code. The response body contains a JSON representation of the data source.  </p>

<p><strong>Example Request</strong><br>
To view the <strong>Example Request</strong> sample code, click on the <strong>cURL</strong> tab on the right panel.   </p>
<pre class="highlight shell tab-shell"><code>   -X POST <span class="s1">'https://{hostname}/rest/folders/0/folders?returnEntity=true'</span> <span class="se">\</span>
   -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'X-Accellion-Version: 15'</span> <span class="se">\</span>
   -H <span class="s1">'Authorization: Bearer {access_token}'</span> <span class="se">\</span>
   -d <span class="s1">'{"name": "MyNewFolder"}'</span>
</code></pre>
<p><strong>Example Response</strong><br>
To view the <strong>Example Response</strong> sample code, click on the <strong>json</strong> tab on the right panel.   </p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T05:33:19+0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"permDeleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expire"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T05:33:19+0000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewFolder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"permalink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">{hostname}</span><span class="se">\/</span><span class="s2">w</span><span class="se">\/</span><span class="s2">DD9J7QUIz1kj6ZPR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"syncable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fileLifetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewFolder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"maxFolderExpiration"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"maxFileLifetime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Example Python Code</strong>  </p>

<p>To view the <strong>Example Python Code</strong> sample code, click on the <strong>Python</strong> tab on the right panel.    </p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-Accellion-Version"</span><span class="p">:</span> <span class="n">api_version</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access_token}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://{hostname}/rest/folders/{folder_id}/folders?returnEntity=true"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">,</span> <span class="n">folder_id</span><span class="o">=</span><span class="n">folder_id</span>
<span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"name"</span><span class="p">:</span> <span class="n">folder_name</span>
<span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="n">folder</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><h1 id='manage-files'>Manage Files</h1>
<p>This section gives examples for the following:
Upload a file</p>

<ul>
<li>Initiate multi-chunks upload</li>
<li>Chunk upload</li>
<li>Download a file</li>
</ul>
<h2 id='upload-a-file'>Upload a file</h2>
<p>This example demonstrates how to upload a new file named &quot;MyNewFile.txt&quot; to a previously created folder. 
You must initiate a multi-chunks Upload before you can upload any part. In response of your initiated request, the API will return an upload URI that you must include in the upload as part of the request.
In this example, a file &#39;MyNewFile.txt&#39; will be uploaded in 2 chunks with 1KB in each chunk (the user can choose their own chunk size).  </p>
<h2 id='initiate-multi-chunks-upload'>Initiate multi-chunks upload</h2><h3 id='http-method-5'>HTTP Method</h3>
<p>POST</p>
<h3 id='request-url-5'>Request URL</h3>
<p>https://{hostname}/rest/folders/{folder_id}/actions/initiateUpload</p>
<h3 id='request-body-5'>Request Body</h3>
<p>filename - The new file name
totalSize - the total size of the file
totalChunks - the total number of chunks
<code>{
    &quot;filename&quot;: &quot;MyNewFile.txt&quot;,
    &quot;totalSize&quot;: 2048,
    &quot;totalChunks&quot;: 2
}</code></p>
<h3 id='response-5'>Response</h3>
<p>If the upload is initiated successfully, the response is a <code>201 Created</code> status code. 
The response body contains a JSON representation of the chunk upload info, including a <code>uri</code> property (dacfs_upload1/rest/uploads/7890 in this sample request) that you can use as the upload URI for subsequent requests.</p>

<p><strong>Example Request</strong>  </p>

<p>To view the <strong>Example Request</strong> sample code, click on the <strong>cURL</strong> tab on the right panel.   </p>
<pre class="highlight shell tab-shell"><code>   -X POST <span class="s1">'https://{hostname}/rest/folders/1234/actions/initiateUpload'</span> <span class="se">\</span>
   -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'X-Accellion-Version: 15'</span> <span class="se">\</span>
   -H <span class="s1">'Authorization: Bearer {access_token}'</span> <span class="se">\</span>
   -d <span class="s1">'{"filename": "MyNewFile.txt", "totalSize": 2048, totalChunks'</span>: 2<span class="o">}</span><span class="s1">'
</span></code></pre>
<p><strong>Example Response</strong>  </p>

<p>To view the <strong>Example Response</strong> sample code, click on the <strong>json</strong> tab on the right panel.   </p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totalSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">2048</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T08:11:07Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dacfs_upload1/rest/uploads/7890"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastTimestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T08:11:07Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uploadedSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clientName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OAuth Playground"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{hostname}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totalChunks"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uploadedChunks"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"completeOk"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"svrUploadTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7890</span><span class="p">,</span><span class="w">
    </span><span class="s2">"replaceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"backend"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acfs"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Example Python Code</strong>  </p>

<p>To view the <strong>Example Python Code</strong> sample code, click on the <strong>Python</strong> tab on the right panel.    </p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-Accellion-Version"</span><span class="p">:</span> <span class="n">api_version</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access_token}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">To</span> <span class="n">initiate</span> <span class="n">Upload</span>
<span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">upload_file_path</span><span class="p">)</span>
<span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">upload_file_path</span><span class="p">)</span>

<span class="n">To</span> <span class="n">calculate</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">chunks</span> <span class="n">to</span> <span class="n">be</span> <span class="n">uploaded</span> <span class="ow">in</span> <span class="n">sequence</span>
<span class="n">total_num_of_chunks</span> <span class="o">=</span> <span class="n">file_size</span> <span class="o">//</span> <span class="n">chunk_size</span>

<span class="n">For</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="mi">7</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">=</span> <span class="mf">3.</span> <span class="n">But</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">number</span> <span class="n">of</span> <span class="n">chunks</span> <span class="n">should</span> <span class="n">be</span> <span class="mi">4</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="k">if</span> <span class="n">file_size</span> <span class="o">%</span> <span class="n">chunk_size</span><span class="p">:</span>
    <span class="n">total_num_of_chunks</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">For</span> <span class="nb">min</span> <span class="n">number</span> <span class="n">of</span> <span class="n">chunks</span> <span class="ow">is</span> <span class="mi">0</span> <span class="n">even</span> <span class="n">though</span> <span class="nb">file</span> <span class="n">size</span> <span class="ow">is</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">total_num_of_chunks</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">total_num_of_chunks</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"filename"</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span> <span class="s">"totalSize"</span><span class="p">:</span> <span class="n">file_size</span><span class="p">,</span> <span class="s">"totalChunks"</span><span class="p">:</span> <span class="n">total_num_of_chunks</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://{hostname}/rest/folders/{folder_id}/actions/initiateUpload"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">,</span>
    <span class="n">folder_id</span><span class="o">=</span><span class="n">folder_id</span>
<span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">response_json</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">To</span> <span class="n">get</span> <span class="n">upload</span> <span class="n">uri</span>
<span class="n">upload_uri</span> <span class="o">=</span> <span class="n">response_json</span><span class="p">[</span><span class="s">"uri"</span><span class="p">]</span>
</code></pre><h2 id='chunk-upload'>Chunk upload</h2><h3 id='http-method-6'>HTTP Method</h3>
<p>POST</p>
<h3 id='request-url-6'>Request URL</h3>
<p>https://{hostname}/{upload_uri}</p>
<h3 id='request-body-6'>Request Body</h3>
<p>compressMode - The compression mode of the chunk (only NORMAL is supported).
compressionSize - The compressed size (it’s always the same as originalSize).
originalSize - The original size of the chunk.
index - The index of the file.
<code>{
    &quot;compressionMode&quot;: &quot;NORMAL&quot;,
    &quot;compressionSize&quot;: 1024,
    &quot;originalSize&quot;: 1024,
    &quot;index&quot;: 1
}</code></p>
<h3 id='response-6'>Response</h3>
<p>If the individual chunk is completed, the response is a <code>200 OK</code> status code.  Once the whole multi-chunks upload is completed successfully, the response is a <code>201 Created</code> status code.
The response body contains a JSON representation of the chunk upload info, including a uri property (dacfs_upload1/rest/uploads/7890 in this sample request) that you can use as the URI for subsequent requests.  </p>

<p><strong>Example Request</strong>
Please note that the chunk /tmp/MyNewFile.txt_chunk_1 was generated beforehand not the actual full file.<br>
To view the <strong>Example Request</strong> sample code, click on the <strong>cURL</strong> tab on the right panel.   </p>
<pre class="highlight shell tab-shell"><code>   -X POST <span class="s1">'https://{hostname}/dacfs_upload1/rest/uploads/7890?returnEntity=true'</span> <span class="se">\</span>
   -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'X-Accellion-Version: 15'</span> <span class="se">\</span>
   -H <span class="s1">'Authorization: Bearer {access_token}'</span> <span class="se">\</span>
   -F <span class="s1">'compressionMode=NORMAL'</span> <span class="se">\</span>
   -F <span class="s1">'compressionSize=1024'</span> <span class="se">\</span>
   -F <span class="s1">'originalSize=1024'</span> <span class="se">\</span>
   -F <span class="s1">'index=1'</span> <span class="se">\</span>
   -F <span class="s1">'content=@/tmp/MyNewFile.txt_chunk_1'</span>
</code></pre>
<p><strong>Example Response (chunk)</strong>  </p>

<p>To view the <strong>Example Response</strong> sample code, click on the <strong>json</strong> tab on the right panel.   </p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totalSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">2048</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T08:11:07Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dacfs_upload1/rest/uploads/7890"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastTimestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T08:11:07Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uploadedSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clientName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OAuth Playground"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{hostname}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totalChunks"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uploadedChunks"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"completeOk"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"svrUploadTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7890</span><span class="p">,</span><span class="w">
    </span><span class="s2">"replaceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"backend"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acfs"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Example Response (Final chunk)</strong>  </p>

<p>To view the <strong>Example Response</strong> sample code, click on the <strong>json</strong> tab on the right panel.   </p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T06:25:16Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clientModified"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Generating..."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-15T09:30:14Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"clientCreated"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyNewFile.txt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"overriddenExpire"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expire"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text/plain"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"permDeleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1240</span><span class="p">,</span><span class="w">
    </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">2048</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Example Python Code</strong>  </p>

<p>To view the <strong>Example Python Code</strong> sample code, click on the <strong>Python</strong> tab on the right panel.    </p>
<pre class="highlight python tab-python"><code><span class="k">class</span> <span class="nc">FileLimiter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">read_limit</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_limit</span> <span class="o">=</span> <span class="n">read_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_obj</span> <span class="o">=</span> <span class="n">file_obj</span>

    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_obj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_limit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>

<span class="c"># get upload uri</span>
<span class="n">upload_url</span> <span class="o">=</span> <span class="n">response_json</span><span class="p">[</span><span class="s">"uri"</span><span class="p">]</span>

<span class="n">file_obj</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">upload_file_path</span><span class="p">,</span> <span class="s">"rb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">fn</span><span class="p">:</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">"https://{hostname}/{upload_url}?returnEntity=true"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">,</span> <span class="n">upload_url</span><span class="o">=</span><span class="n">upload_url</span><span class="p">)</span>

    <span class="c"># upload the files in chunks</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">total_num_of_chunks</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">read_limit</span> <span class="o">=</span> <span class="n">chunk_size</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">total_num_of_chunks</span> <span class="k">else</span> <span class="p">(</span><span class="n">file_size</span> <span class="o">-</span> <span class="p">(</span><span class="n">chunk_size</span> <span class="o">*</span> <span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">chunk_size</span>
        <span class="n">fn</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>

        <span class="c"># reading file in chunks</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"compressionMode"</span><span class="p">:</span> <span class="s">"NORMAL"</span><span class="p">,</span> <span class="s">"compressionSize"</span><span class="p">:</span> <span class="n">read_limit</span><span class="p">,</span> <span class="s">"originalSize"</span><span class="p">:</span> <span class="n">read_limit</span><span class="p">,</span> <span class="s">"index"</span><span class="p">:</span> <span class="n">index</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">"content"</span><span class="p">:</span> <span class="n">FileLimiter</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">read_limit</span><span class="p">)},</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">total_num_of_chunks</span><span class="p">:</span>
            <span class="n">file_obj</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">return</span> <span class="n">file_obj</span>
</code></pre>
<p><strong>Example whole multi-chunks</strong>  </p>

<p>To view the <strong>Example Python Code</strong> sample code, click on the <strong>Python</strong> tab on the right panel.    </p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">class</span> <span class="nc">FileLimiter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">read_limit</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_limit</span> <span class="o">=</span> <span class="n">read_limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_obj</span> <span class="o">=</span> <span class="n">file_obj</span>

    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_obj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_limit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"X-Accellion-Version"</span><span class="p">:</span> <span class="n">api_version</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access_token}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">To</span> <span class="n">initiate</span> <span class="n">Upload</span>
<span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">upload_file_path</span><span class="p">)</span>
<span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">upload_file_path</span><span class="p">)</span>

<span class="n">To</span> <span class="n">calculate</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">chunks</span> <span class="n">to</span> <span class="n">be</span> <span class="n">uploaded</span> <span class="ow">in</span> <span class="n">sequence</span>
<span class="n">total_num_of_chunks</span> <span class="o">=</span> <span class="n">file_size</span> <span class="o">//</span> <span class="n">chunk_size</span>

<span class="n">For</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="mi">7</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">=</span> <span class="mf">3.</span> <span class="n">But</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">number</span> <span class="n">of</span> <span class="n">chunks</span> <span class="n">should</span> <span class="n">be</span> <span class="mi">4</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="k">if</span> <span class="n">file_size</span> <span class="o">%</span> <span class="n">chunk_size</span><span class="p">:</span>
    <span class="n">total_num_of_chunks</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">For</span> <span class="nb">min</span> <span class="n">number</span> <span class="n">of</span> <span class="n">chunks</span> <span class="ow">is</span> <span class="mi">0</span> <span class="n">even</span> <span class="n">though</span> <span class="nb">file</span> <span class="n">size</span> <span class="ow">is</span> <span class="mi">0</span>
<span class="k">if</span> <span class="n">total_num_of_chunks</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">total_num_of_chunks</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"filename"</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span> <span class="s">"totalSize"</span><span class="p">:</span> <span class="n">file_size</span><span class="p">,</span> <span class="s">"totalChunks"</span><span class="p">:</span> <span class="n">total_num_of_chunks</span><span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://{hostname}/rest/folders/{folder_id}/actions/initiateUpload"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">,</span>
    <span class="n">folder_id</span><span class="o">=</span><span class="n">folder_id</span>
<span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">response_json</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="c"># get upload uri</span>
<span class="n">upload_url</span> <span class="o">=</span> <span class="n">response_json</span><span class="p">[</span><span class="s">"uri"</span><span class="p">]</span>

<span class="n">file_obj</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">upload_file_path</span><span class="p">,</span> <span class="s">"rb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">fn</span><span class="p">:</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">"https://{hostname}/{upload_url}?returnEntity=true"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">,</span> <span class="n">upload_url</span><span class="o">=</span><span class="n">upload_url</span><span class="p">)</span>

    <span class="c"># upload the files in chunks</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">total_num_of_chunks</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">read_limit</span> <span class="o">=</span> <span class="n">chunk_size</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">total_num_of_chunks</span> <span class="k">else</span> <span class="p">(</span><span class="n">file_size</span> <span class="o">-</span> <span class="p">(</span><span class="n">chunk_size</span> <span class="o">*</span> <span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">chunk_size</span>
        <span class="n">fn</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>

        <span class="c"># reading file in chunks</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"compressionMode"</span><span class="p">:</span> <span class="s">"NORMAL"</span><span class="p">,</span> <span class="s">"compressionSize"</span><span class="p">:</span> <span class="n">read_limit</span><span class="p">,</span> <span class="s">"originalSize"</span><span class="p">:</span> <span class="n">read_limit</span><span class="p">,</span> <span class="s">"index"</span><span class="p">:</span> <span class="n">index</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">"content"</span><span class="p">:</span> <span class="n">FileLimiter</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">read_limit</span><span class="p">)},</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">total_num_of_chunks</span><span class="p">:</span>
            <span class="n">file_obj</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">return</span> <span class="n">file_obj</span>
</code></pre><h1 id='manage-mail'>Manage Mail</h1>
<p>This section gives examples for the following:  </p>

<ul>
<li>Send a mail with files</li>
<li>  Send mail<br></li>
</ul>
<h2 id='send-a-mail-with-files'>Send a Mail with Files</h2>
<p>This example demonstrates how to send a mail with an uploaded file to &quot;user1@email.com&quot;, &quot;user2@email.com&quot;.  </p>
<h2 id='send-mail'>Send mail</h2><h3 id='http-method-7'>HTTP Method</h3>
<p>POST</p>
<h3 id='request-url-7'>Request URL</h3>
<p>https://{hostname}/rest/mail/actions/sendFile</p>
<h3 id='request-body-7'>Request Body</h3>
<p>draft - 1 means create a draft mail. 0 - send the mail directly
<code>{
    &quot;to&quot;: [&quot;user1@email.com&quot;, &quot;user2@email.com&quot;],
    &quot;cc&quot;: [],
    &quot;bcc&quot;: [],
    &quot;files&quot;: [1240],
    &quot;subject&quot;: &quot;Test mail subject&quot;,
    &quot;body&quot;: &quot;Test mail body&quot;,
    &quot;draft&quot;: 0
}</code>  </p>
<h3 id='response-7'>Response</h3>
<p>If the upload is initiated successfully, the response is a <code>201 Created</code> status code.
The response body contains a JSON representation of the mail, including a id property (256 in this sample request) that you can use as the mail ID for subsequent requests.  </p>

<p><strong>Example Request</strong>  </p>

<p>To view the <strong>Example Request</strong> sample code, click on the <strong>cURL</strong> tab on the right panel.   </p>
<pre class="highlight shell tab-shell"><code>   -X POST <span class="s1">'https://{hostname}/rest/mail/actions/sendFile?returnEntity=true'</span> <span class="se">\</span>
   -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
   -H <span class="s1">'X-Accellion-Version: 15'</span> <span class="se">\</span>
   -H <span class="s1">'Authorization: Bearer {access_token}'</span> <span class="se">\</span>
   -d <span class="s1">'{"to": ["user1@email.com", "user2@email.com"], "files": [1240], "subject": "Test mail subject", "body": "Test mail body", "draft": 0}'</span>
</code></pre>
<p><strong>Example Response</strong>  </p>

<p>To view the <strong>Example Response</strong> sample code, click on the <strong>json</strong> tab on the right panel.   </p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"emailPackageId"</span><span class="p">:</span><span class="w"> </span><span class="mi">197</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isRead"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variables"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOST"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{hostname}"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SENDER_EMAIL"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{user@email.com}"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FILE_COUNT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EXPIRATION_DATE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aug 28, 2020"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOWNLOAD_LINK"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{hostname}/w/Vo0FUmZryMDQVpsiGnEmDdd9F86kklnpyUNfQlNPCRe3m"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REGISTRATION_LINK"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{hostname}/register?w=Vo0FUmZryMDQVpsiGnEmDdd9F86kklnpyUNfQlNPCRe3m"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBJECT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test mail subject"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BODY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test mail body"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"variable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FILES_LIST"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\n</span><span class="s2">                &lt;table border=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2"> cellpadding=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2"> cellspacing=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2"> width=</span><span class="se">\"</span><span class="s2">100%</span><span class="se">\"</span><span class="s2"> style=</span><span class="se">\"</span><span class="s2">min-width:100%; border-collapse:collapse</span><span class="se">\"</span><span class="s2">&gt;&lt;tbody&gt;</span><span class="se">\n</span><span class="s2">                    &lt;tr&gt;</span><span class="se">\n</span><span class="s2">         &lt;td valign=</span><span class="se">\"</span><span class="s2">top</span><span class="se">\"</span><span class="s2"> style=</span><span class="se">\"</span><span class="s2">padding:20px 0; border-top:1px solid #f2f2f2</span><span class="se">\"</span><span class="s2">&gt;</span><span class="se">\n</span><span class="s2">            </span><span class="se">\n</span><span class="s2">                &lt;table border=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2"> cellpadding=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2"> cellspacing=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2"> width=</span><span class="se">\"</span><span class="s2">100%</span><span class="se">\"</span><span class="s2"> style=</span><span class="se">\"</span><span class="s2">min-width:100%;border-collapse:collapse;</span><span class="se">\"</span><span class="s2">&gt;&lt;tbody&gt;</span><span class="se">\n</span><span class="s2">                    &lt;tr&gt;</span><span class="se">\n</span><span class="s2">        &lt;td style=</span><span class="se">\"</span><span class="s2">padding: 0 14px 0 20px;width: 1%;</span><span class="se">\"</span><span class="s2">&gt;</span><span class="se">\n</span><span class="s2">  &lt;img alt=</span><span class="se">\"</span><span class="s2">audio</span><span class="se">\"</span><span class="s2"> width=</span><span class="se">\"</span><span class="s2">24</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">24</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">https://{hostname}styles/img/email-template/document.png</span><span class="se">\"</span><span class="s2">&gt;</span><span class="se">\n</span><span class="s2">                        &lt;/td&gt;</span><span class="se">\n</span><span class="s2">                        &lt;td style=</span><span class="se">\"</span><span class="s2">font-size: 16px;line-height: 1.25;color:#000000</span><span class="se">\"</span><span class="s2">&gt;&lt;span&gt;1 audio file&lt;/span&gt;&lt;/td&gt;</span><span class="se">\n</span><span class="s2">      &lt;/tr&gt;</span><span class="se">\n</span><span class="s2">                    &lt;tr&gt;</span><span class="se">\n</span><span class="s2">                        &lt;td&gt;&lt;/td&gt;</span><span class="se">\n</span><span class="s2">                        &lt;td style=</span><span class="se">\"</span><span class="s2">font-size: 14px;color: #404040;line-height: 1.5;padding-right:20px;</span><span class="se">\"</span><span class="s2">&gt;&lt;span&gt;MyNewFile.txt&lt;/span&gt;&lt;/td&gt;</span><span class="se">\n</span><span class="s2">     &lt;/tr&gt;</span><span class="se">\n</span><span class="s2">      &lt;/tbody&gt;&lt;/table&gt;</span><span class="se">\n</span><span class="s2">            </span><span class="se">\n</span><span class="s2">                        &lt;/td&gt;</span><span class="se">\n</span><span class="s2">     &lt;/tr&gt;</span><span class="se">\n</span><span class="s2">       &lt;/tbody&gt;&lt;/table&gt;</span><span class="se">\n</span><span class="s2">            "</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"secureBody"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"senderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-20T07:25:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bucket"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outgoing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isUserSent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentEmailId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emailReturnReceipt"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isPreview"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recipients"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"isDistributionList"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user1@email.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"isDistributionList"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user2@email.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test mail subject"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queued"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"watermark"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Example Python Code</strong>  </p>

<p>To view the <strong>Example Python Code</strong> sample code, click on the <strong>Python</strong> tab on the right panel.    </p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">access_token</span> <span class="o">=</span> <span class="s">"ca648ba442acfd8fa8a57962bf7fc8233df0d87c"</span>
<span class="n">api_version</span> <span class="o">=</span> <span class="s">"15</span><span class="err">
</span><span class="s">hostname = "</span><span class="n">hostname</span><span class="o">.</span><span class="n">com</span><span class="s">"</span><span class="err">

</span><span class="s">headers = {</span><span class="err">
</span><span class="s">    "</span><span class="n">Accept</span><span class="s">": "</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="s">",</span><span class="err">
</span><span class="s">    "</span><span class="n">X</span><span class="o">-</span><span class="n">Accellion</span><span class="o">-</span><span class="n">Version</span><span class="s">": api_version,</span><span class="err">
</span><span class="s">    "</span><span class="n">Authorization</span><span class="s">": "</span><span class="n">Bearer</span> <span class="p">{</span><span class="n">access_token</span><span class="p">}</span><span class="s">".format(access_token=access_token)</span><span class="err">
</span><span class="s">}</span><span class="err">

</span><span class="s">url = "</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="p">{</span><span class="n">hostname</span><span class="p">}</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">mail</span><span class="o">/</span><span class="n">actions</span><span class="o">/</span><span class="n">sendFile</span><span class="err">?</span><span class="n">returnEntity</span><span class="o">=</span><span class="n">true</span><span class="s">".format(</span><span class="err">
</span><span class="s">    hostname=hostname</span><span class="err">
</span><span class="s">)</span><span class="err">
</span><span class="s">data = {</span><span class="err">
</span><span class="s">    "</span><span class="n">to</span><span class="s">": ["</span><span class="n">user1</span><span class="nd">@email.com</span><span class="s">", "</span><span class="n">user2</span><span class="nd">@email.com</span><span class="s">"],</span><span class="err">
</span><span class="s">    "</span><span class="n">cc</span><span class="s">": [],</span><span class="err">
</span><span class="s">    "</span><span class="n">bcc</span><span class="s">": [],</span><span class="err">
</span><span class="s">    "</span><span class="n">files</span><span class="s">": [250],</span><span class="err">
</span><span class="s">    "</span><span class="n">subject</span><span class="s">": "</span><span class="n">Test</span> <span class="n">mail</span> <span class="n">subject</span><span class="s">",</span><span class="err">
</span><span class="s">    "</span><span class="n">body</span><span class="s">": "</span><span class="n">Test</span> <span class="n">mail</span> <span class="n">body</span><span class="s">",</span><span class="err">
</span><span class="s">    "</span><span class="n">draft</span><span class="s">": 0</span><span class="err">
</span><span class="s">}</span><span class="err">
</span><span class="s">response = requests.post(url=url, headers=headers, data=data)</span><span class="err">
</span><span class="s">mail = response.json()</span><span class="err">
</span></code></pre><h1 id='terminology'>Terminology</h1>
<p><strong>Access Token</strong> - The token is used by the API client for authorization and can be used to make API calls.  There is a  <strong>lifetime</strong> given to each Access Token, and this is configured by the admin in <strong>Application</strong> &gt; <strong>Client Management</strong> &gt; <strong>Custom Applications</strong>, per client application.  After the lifetime is over, the token expires and is unusable. A <strong>refresh token</strong> can be used to obtain a new  <strong>access token</strong> after it expires. </p>

<p><strong>API call</strong> - An API call is a general term for a HTTP request that is sent from the client to the server, to perform some kind of action.  Common <strong>HTTP methods</strong> are <strong>GET</strong> and <strong>POST</strong>.  GET requests data from a specified resource.  POST submits data to be processed by a specified resource.  See https://www.w3schools.com/tags/ref_httpmethods.asp for more information on HTTP methods.</p>

<p><strong>Client/Server</strong> - The API client is the program that is created to interact with the kiteworks server and make HTTP requests for the desired actions.  For example, the AAA is a <strong>client</strong> that invokes the kiteworks APIs, to perform actions like uploading, sending or downloading files and emails on kiteworks.  Customers can create their own client applications in the admin interface under <strong>Application</strong> &gt; <strong>Client Management</strong> &gt; <strong>Custom Applications</strong>.</p>

<p><strong>Endpoint</strong> - An endpoint is just a reference to a URI that accepts HTTP requests (for example, in https://meowworks.accellion.net/rest/users/me is an <strong>endpoint</strong>).  Endpoints and resources are very similar, but the <strong>endpoint</strong> is the entire <strong>URI</strong>.</p>

<p><strong>Flow</strong> - The flow refers to the <strong>authentication flow</strong> used by the client application.  This is typically <strong>Authorization Code</strong> or <strong>Signature Based Authorization Code</strong> or <strong>SAML 2.0</strong> (SAML 2.0 is less commonly used).  In the API Playground, there are more flows available when you click <strong>Get Token</strong> however these are <strong>not available</strong> to be used and have not been implemented. </p>

<ul>
<li>  Authorization code: standard OAuth 2.0, consent and code redemption process.</li>
<li>  Signature Based Authorization Code: use this flow with the application can verify the identity of the user. This should only be used for trusted applications.<br></li>
</ul>

<p><strong>OAuth Playground</strong> - The API playground is a sample client that also serves as &quot;documentation&quot; for our API endpoints.  It allows an application admin to test out API calls, and see how they work - what the <strong>resource</strong> is, <strong>HTTP method</strong>, as well as the required <strong>parameters</strong>. </p>

<p><strong>Parameters</strong> - Each <strong>API call</strong> has a set of required and/or optional <strong>parameters</strong> which tell the server information about the resource that is being accessed.  For instance, when using /rest/users/{id} a required parameter is user ID (in order to look up a specific user) which can be obtained with another <strong>GET</strong> call (GET /rest/users) that returns a list of users and their user IDs.</p>

<p><strong>Refresh Token</strong> - Once an <strong>Access Token</strong> expires this can be used to obtain a new one - there is also a lifetime configured for this in Application &gt; Client Management &gt; Custom Applications, per client application.</p>

<p><strong>Resource</strong> - A <strong>resource</strong> is an object or set of objects exposed at the API endpoint - for example &quot;/rest/users/me&quot; is a resource.</p>

<p><strong>REST</strong> - (Representational State Transfer) 
*   Resources expose easily understood directory structure URIs.
*   Representations transfer JSON or XML to represent data objects and attributes.
*   Messages use HTTP methods explicitly (for example, GET, POST, PUT, and DELETE).
*   Stateless interactions store no client context on the server between requests. State dependencies limit and restrict scalability. The client holds session state.</p>
<h2 id='common-issues'>Common Issues</h2>
<ul>
<li>  Sometimes customers confuse Signature Based Access with Signature Based Authorization Code when using the API playground.   Signature Based Access only works for a single API call, and doesn&#39;t provide a token with a lifetime.<br></li>
</ul>
<h1 id='help'>Help</h1>
<p>Please tell us how we can improve this guide for you.</p>

<p>Perhaps you would like to see code samples in a different language or for a different use case. Or maybe you need help figuring out how to solve your business problem using Accellion&#39;s API.</p>

<p>Send us an email at <a href="mailto:support@accellion.com">support@accellion.com</a></p>

<p><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
